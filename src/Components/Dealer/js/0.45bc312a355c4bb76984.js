webpackJsonp([0,88,129],{"0IIb":function(e,t){},"9bBU":function(e,t,r){r("mClu");var i=r("FeBl").Object;e.exports=function(e,t,r){return i.defineProperty(e,t,r)}},C4MV:function(e,t,r){e.exports={default:r("9bBU"),__esModule:!0}},EOjH:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=new(r("7+uW").default)},Glw6:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("gyMJ"),n=(r("iKHV"),r("VV4h")),s=r("eInf"),a=r("sQMB"),o=r("KvKp"),l={data:function(){return{filter:"0",visible:!1,loading:!1,imeiComp:null,repeatImei:[],reocrds:[]}},components:{membership:n.default,imeiDetail:s.default,platformComp:a.default},computed:{normalNum:function(){return this.reocrds.filter(function(e){return e.isok}).length},errorNum:function(){return this.reocrds.filter(function(e){return!e.isok}).length},repeatData:function(){},repeatNum:function(){return this.repeatImei.length},filterData:function(){var e=this;return"0"==this.filter?this.reocrds:"1"==this.filter?this.reocrds.filter(function(e){return e.isok}):"2"==this.filter?this.reocrds.filter(function(e){return!e.isok}):"3"==this.filter?this.reocrds.filter(function(t){return e.inArray(e.repeatImei,t.imei)}):void 0}},methods:{checkClick:function(){this.$emit("getImeis")},rowClassFn:function(e){var t=e.row;e.rowIndex;return t.isok?"":"table-row-error"},beforeDestroy:function(){this.imeiComp=null},setRepeatData:function(e){if(e){var t=[],r=[];(e=e.replaceAll("\n",",").split(",")).forEach(function(e){-1!=t.indexOf(e)?r.push(e):t.push(e)}),this.repeatImei=r}},getImeisInfoData:function(e){var t=this;e&&(e=this.$trim(e),this.setRepeatData(e),e=this.formatImeis(e),this.loading=!0,Object(i._49)({imeis:e.join(",")}).then(function(e){t.visible=!t.visible,t.reocrds=e.records,t.loading=!1}).catch(function(e){t.loading=!1}))},showFn:function(){Object(o.k)(document,"click",this.handleDocumentClick)},handleDocumentClick:function(e){this.imeiComp&&this.imeiComp.$el.contains(e.target)||this.$refs.membershipComp&&this.$refs.membershipComp.$el.contains(e.target)||(this.visible=!1)},hideFn:function(){Object(o.j)(document,"click",this.handleDocumentClick)},filterClick:function(){var e=[];this.filterData.forEach(function(t){e.push(t.imei)}),this.$emit("setImeis",e)},setImeiComp:function(e){this.imeiComp=e},showMembership:function(e){this.$refs.membershipComp.setVisible(!0),this.$refs.membershipComp.getRelationship(e.customerid)}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-popover",{ref:"imeiPopover",attrs:{"popper-class":"imei-list-popover",placement:"right",width:"400",trigger:"manual"},on:{"after-enter":e.showFn,"after-leave":e.hideFn},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("el-tabs",{on:{"tab-click":e.filterClick},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[r("el-tab-pane",{attrs:{label:e.lg.all+"("+e.reocrds.length+")",name:"0"}}),e._v(" "),r("el-tab-pane",{attrs:{label:e.lg.normal+"("+e.normalNum+")",name:"1"}}),e._v(" "),r("el-tab-pane",{attrs:{label:e.lg.repeated+"("+e.repeatNum+")",name:"3"}}),e._v(" "),r("el-tab-pane",{attrs:{label:e.lg.error+"("+e.errorNum+")",name:"2"}})],1),e._v(" "),r("el-button",{staticClass:"popver-close-btn",attrs:{type:"info",round:"",icon:"el-icon-close"},on:{click:function(t){e.visible=!1}}}),e._v(" "),r("el-table",{attrs:{data:e.filterData,"max-height":"300","row-class-name":e.rowClassFn}},[r("el-table-column",{attrs:{width:"150",property:"imei",label:e.lg.imei},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isok?[r("imeiDetail",{attrs:{record:{deviceid:t.row.id,imei:t.row.imei}},on:{dialogShow:e.setImeiComp}})]:[e._v("\n          "+e._s(t.row.imei)+"\n        ")]]}}])}),e._v(" "),r("el-table-column",{attrs:{width:"100",property:"devicetype",label:e.lg.targetType}}),e._v(" "),r("el-table-column",{attrs:{width:"150",label:e.lg.membershipCustomer},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isok?[r("a",{staticClass:"txt-ellipsis link-btn",on:{click:function(r){return e.showMembership(t.row)}}},[e._v(e._s(t.row.customername))])]:[r("div",{staticClass:"txt-ellipsis"},[r("p",[e._v(e._s(e.lg[t.row.errorcode]))]),e._v(" "),"20005"==t.row.errorcode?[r("platformComp",{attrs:{imeis:t.row.imei}})]:e._e()],2)]]}}])})],1),e._v(" "),r("el-button",{staticClass:"check-imei-btn",attrs:{slot:"reference",loading:e.loading},on:{click:e.checkClick},slot:"reference"},[e._v(e._s(e.lg.check))]),e._v(" "),r("membership",{ref:"membershipComp"})],1)},staticRenderFns:[]};var u=r("VU/8")(l,c,!1,function(e){r("fY/y")},null,null);t.default=u.exports},Lu3L:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("g5iy"),n=r("gyMJ"),s=r("iKHV"),a=r("VHFF"),o={props:["transfertype"],data:function(){return{title:{5:lg.tracklogDataTransfer,6:lg.tlcDataTransfer,8:lg.monoDataTransfer,9:lg.ogDataTransfer},activeName:"transfer",searchImei:"",records:[],total:0,start:0,pagesizes:[10,15,20,30,50],pagesize:10,loading:!1}},components:{transferDataAdd:i.default,dataCardHistory:a.default},methods:{showAdd:function(){this.$refs.addComp.setVisible(!0)},addSuccess:function(){this.getList()},tabClick:function(){"cardHistory"==this.activeName&&this.$refs.cardHistoryComp.getList()},indexMethod:function(e){return this.start+(e+1)},searchList:function(){if(this.start=0,this.searchImei=this.$trim(this.searchImei),""!=this.searchImei&&!Object(s.h)(this.searchImei))return this.$message.error(lg.inputImeiLast5);this.getList()},getList:function(){var e=this;this.loading=!0,Object(n._151)({start:this.start,count:this.pagesize,transfertype:this.transfertype,imei:this.searchImei}).then(function(t){e.loading=!1,e.records=t.record,e.total=t.totalcount}).catch(function(){e.loading=!1})},handleCurrentChange:function(e){this.start=(Number(e)-1)*this.pagesize,this.getList()},handleSizeChange:function(e){this.pagesize=e,this.getList()},delRecord:function(e){var t=this,r=e.imei;if(!r)return this.$message.error(lg[10005]);var i=this;this.$confirm(lg.delRecord).then(function(){Object(n._1)({imei:r,transfertype:t.transfertype}).then(function(r){t.$message.success(lg.success),i.delArray(i.records,e)}).catch(function(){})}).catch(function(){})},fmtName:function(e,t,r,i){return e.customername+"("+e.customeraccount+")"},fmtTime:function(e,t,r,i){return this.utcToLocal(r)}},mounted:function(){this.getList()}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h100b"},[r("h3",{staticClass:"block-titlebar"},[e._v(e._s(e.title[e.transfertype]))]),e._v(" "),r("el-scrollbar",{staticClass:"has-titlebar-content white-bg"},[r("div",{staticClass:"table-page"},[r("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:e.title[e.transfertype],name:"transfer"}},[r("div",{staticClass:"pb15"},[r("el-button",{attrs:{type:"primary"},on:{click:e.showAdd}},[e._v(e._s(e.lg.add))]),e._v(" "),r("el-input",{staticClass:"fr",staticStyle:{width:"200px"},attrs:{"prefix-icon":"el-icon-search",placeholder:e.lg.imei},on:{change:e.searchList},model:{value:e.searchImei,callback:function(t){e.searchImei=t},expression:"searchImei"}})],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.records,stripe:""}},[r("el-table-column",{attrs:{type:"index",align:"center",index:e.indexMethod,label:e.lg.serialNum,width:"48"}}),e._v(" "),r("el-table-column",{attrs:{prop:"customername",label:e.lg.account,formatter:e.fmtName}}),e._v(" "),r("el-table-column",{attrs:{prop:"imei",label:e.lg.imei}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:e.lg.remark}}),e._v(" "),r("el-table-column",{attrs:{prop:"createtime",label:e.lg.createTime,formatter:e.fmtTime,width:"160"}}),e._v(" "),r("el-table-column",{attrs:{label:e.lg.operate},scopedSlots:e._u([{key:"default",fn:function(t){return[r("a",{staticClass:"link-btn",on:{click:function(r){return e.delRecord(t.row)}}},[e._v(e._s(e.lg.delete))])]}}])})],1),e._v(" "),e.total?r("el-pagination",{attrs:{"page-sizes":e.pagesizes,"page-size":e.pagesize,background:"",layout:"total,sizes,prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e()],1),e._v(" "),r("el-tab-pane",{attrs:{label:e.lg.cardHistory,name:"cardHistory"}},[r("dataCardHistory",{ref:"cardHistoryComp"})],1)],1),e._v(" "),r("transferDataAdd",{ref:"addComp",attrs:{transfertype:e.transfertype},on:{addSuccess:e.addSuccess}})],1)])],1)},staticRenderFns:[]},c=r("VU/8")(o,l,!1,null,null,null);t.default=c.exports},NPiI:function(e,t){},NYTC:function(e,t){},Rpa2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("gyMJ"),n={props:["defaultUserInfo","treeType"],prop:["width"],data:function(){return{activeName:"",name:"",num:10,notFirst:!1,showTree:!1}},components:{tree:r("zAgK").default},methods:{changeFn:function(){""==this.$trim(this.name)&&(this.activeName="",this.callbackComp({customerid:"",name:""}))},querySearchAsync:function(e,t){var r=this,n=this.$trim(e);if(""==n)return t([]);Object(i.U)({query:n,num:this.num}).then(function(e){t(e.suggestions),r.$refs.userTreeInput.handleFocus()}).catch(function(e){})},handleSelect:function(e){this.activeName=e.value,this.callbackComp({customerid:e.data,name:e.value,roletype:e.roletype})},treeNodeClick:function(e){this.callbackComp({customerid:e.id,name:e.name,roletype:e.roletype}),this.name=e.name,this.hideTree(),this.activeName=e.account?(e._name?e._name:e.name)+"("+e.account+")":""},setCustomer:function(e){this.name=e},refresh:function(){this.$refs.treeComp.refresh()},toggleTree:function(){this.notFirst=!0,this.showTree=!this.showTree},hideTree:function(){this.showTree=!1},clearFn:function(){this.name="",this.activeName=""},callbackComp:function(e){this.$emit("selected",e)},focusAutoComp:function(e){document.getElementById("tips").style.display="none",this.checkPopupPosition(e)},checkPopupPosition:function(e){if(0!=document.body.scrollLeft)for(var t=document.querySelectorAll(".el-dialog__body"),r=0,i=t.length;r<i;r++)t[r].hasChildNodes(e.target)&&(document.body.scrollLeft=0)},setDefaultUserInfo:function(e){e&&(this.defaultUserInfo=e,this.treeNodeClick(this.defaultUserInfo))}},mounted:function(){var e=this;e.defaultUserInfo&&e.treeNodeClick(e.defaultUserInfo),document.body.addEventListener("click",function(t){e.hideTree()})}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-tree-select"},[r("div",{directives:[{name:"tip",rawName:"v-tip",value:e.activeName,expression:"activeName"}],attrs:{"data-tips":e.activeName}},[r("el-autocomplete",{ref:"userTreeInput",attrs:{"trigger-on-focus":!1,"fetch-suggestions":e.querySearchAsync,"popper-class":"user-autocomplete",clearable:"",placeholder:e.lg.selectHint},on:{select:e.handleSelect,focus:function(t){return e.focusAutoComp(t)},input:e.changeFn},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[r("i",{staticClass:"user-icon",class:"user-icon-"+i.roletype}),e._v(" "),r("div",{staticClass:"info"},[r("div",{staticClass:"s-name"},[e._v(e._s(i.name))]),e._v(" "),r("span",{staticClass:"s-account"},[e._v(e._s(i.account))])])]}}]),model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[r("el-button",{staticClass:"select-btn",attrs:{slot:"append",icon:e.showTree?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:function(t){return t.stopPropagation(),e.toggleTree.apply(null,arguments)}},slot:"append"})],1)],1),e._v(" "),e.notFirst?r("div",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"treeBox"},[r("tree",{ref:"treeComp",attrs:{treeType:e.treeType},on:{treeNodeClick:e.treeNodeClick}})],1):e._e()])},staticRenderFns:[]};var a=r("VU/8")(n,s,!1,function(e){r("NPiI")},null,null);t.default=a.exports},SDaM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("EOjH"),n=r("gyMJ"),s={props:["disabled"],data:function(){return{records:[]}},components:{userDetailComp:function(){return r.e(1).then(r.bind(null,"5VNz")).catch()},resetPwdComp:function(){return r.e(74).then(r.bind(null,"RDSy")).catch()}},computed:{loginId:function(){return this.$store.state.customerInfo.id}},methods:{select_tree_node:function(e){if("business"!=this.$router.currentRoute.name&&this.$router.push("/business"),this.$store.state.businessLoad){var t=[];this.records.forEach(function(r,i){i<=e&&t.push(r.id||r.customerid)}),i.a.$emit("expendBusinessTree",t)}else{var r=this;setTimeout(function(){r.select_tree_node(e)},200)}},showDetail:function(e){var t=this;this.findObj("userDetailComp",this.$refs,function(){t.$refs.userDetailComp.setVisible(!0),t.$refs.userDetailComp.getInfo(e)})},updataDetail:function(){},resetPassword:function(e){var t=this;this.findObj("resetPwdComp",this.$refs,function(){t.$refs.resetPwdComp.resetPassword(e)})},getRelationship:function(e){var t=this;if(!e)return this.$message.error(lg[10005]);Object(n._116)({customerid:e}).then(function(e){t.records=e.record}).catch(function(e){})},getNodeIconByData:function(e){var t=e.type||e.customertype;return 1==t?1==e.readonly?"dealerreadonly":e.hadchild?"dealerarr":"dealer":2==t?1==e.readonly?"userreadonly":e.hadchild?"userarr":"user":"uservirtual"},setData:function(e){this.records=e.reverse()}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"membership-table"},[r("table",{staticClass:"el-table",attrs:{cellpadding:"0",cellspacing:"0"}},[r("thead",{staticClass:"el-table__header"},[r("tr",{attrs:{bgcolor:"#eee"}},[r("th",{staticStyle:{width:"22px"}}),e._v(" "),r("th",[e._v(e._s(e.lg.customerName))]),e._v(" "),r("th",[e._v(e._s(e.lg.account))]),e._v(" "),r("th",[e._v(e._s(e.lg.operate))])])]),e._v(" "),r("tbody",e._l(e.records,function(t,i){return r("tr",{staticClass:"table-tr"},[r("td"),e._v(" "),r("td",[r("div",{staticClass:"name-td",style:"margin-left:"+(10+18*i)+"px;"},[r("a",{directives:[{name:"tip",rawName:"v-tip",value:{txt:e.lg.showintree,align:"rightBottom"},expression:"{txt:lg.showintree,align:'rightBottom'}"}],class:{"link-btn":!e.disabled},on:{click:function(t){return e.select_tree_node(i)}}},[r("i",{class:"ico-user ico-user-"+e.getNodeIconByData(t)}),e._v("\n              "+e._s(t.name)+"\n              ")])])]),e._v(" "),r("td",[r("copy",{attrs:{txt:t.account}},[e._v(e._s(t.account))])],1),e._v(" "),r("td",[r("a",{staticClass:"link-btn",attrs:{href:"javascript://"},on:{click:function(r){return e.showDetail(t.id||t.customerid)}}},[e._v(e._s(e.lg.detail))]),e._v(" |\n          "),r("a",{staticClass:"link-btn",attrs:{target:"_blank",href:"/V2/index.jsp?customerid="+(t.id||t.customerid)+"&source=V2/"}},[e._v(e._s(e.lg.monitor))]),e._v(" "),i==e.records.length-1&&t.id!=e.loginId?r("span",[e._v("| "),r("a",{staticClass:"link-btn",on:{click:function(r){e.resetPassword(t.id||t.customerid)}}},[e._v(e._s(e.lg.resetPwd))])]):e._e()])])}),0)]),e._v(" "),r("userDetailComp",{ref:"userDetailComp",attrs:{title:"detail"},on:{cbSuccess:e.updataDetail}}),e._v(" "),r("resetPwdComp",{ref:"resetPwdComp"})],1)},staticRenderFns:[]};var o=r("VU/8")(s,a,!1,function(e){r("0IIb")},null,null);t.default=o.exports},UdMx:function(e,t){},VHFF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Dd8w"),n=r.n(i),s=r("Rpa2"),a=r("gyMJ"),o={data:function(){return{searchFm:{type:"",starttime:"",endtime:"",customerid:""},pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},pointType:["",lg.yourBus,lg.sutranDataTransfer,"Mahamining","ghTrack",lg.tracklogDataTransfer,lg.tlcDataTransfer,"",lg.monoDataTransfer,lg.ogDataTransfer],records:[],total:0,start:0,pagesizes:[10,15,20,30,50],pagesize:10,params:{},loading:!1}},components:{userTreeSelect:s.default,historyDetail:function(){return r.e(85).then(r.bind(null,"/P8L"))}},methods:{indexMethod:function(e){return this.start+(e+1)},selected:function(e){this.searchFm.customerid=e.customerid},checkedDateTime:function(e){this.$refs.endDateTimePicker.focus()},getList:function(){var e=this;this.loading=!0,Object(a._150)(n()({start:this.start,count:this.pagesize},this.params)).then(function(t){e.records=t.record,e.total=t.totalcount,e.loading=!1}).catch(function(t){e.loading=!1})},searchFn:function(){this.start=0,this.total=0,this.params=this.deepCopy(this.searchFm),this.params.endtime=this.params.endtime?this.params.endtime+(864e5-1):this.params.endtime,this.getList()},resetFm:function(){this.$refs.searchFm.resetFields(),this.params={},this.start=0,this.total=0,this.$refs.userTreeComp.clearFn(),this.getList()},showDetail:function(e){this.$refs.historyDetailComp.showDialog(e)},handleCurrentChange:function(e){this.start=(Number(e)-1)*this.pagesize,this.getList()},handleSizeChange:function(e){this.pagesize=e,this.getList()},formatterTime:function(e,t,r,i){return this.utcToLocal(r)},formatterType:function(e,t,r,i){return this.pointType[r]},formatterOpt:function(e,t,r,i){var n=["",lg.create,lg.transferOut,lg.use,lg.transferIn,lg.return,lg.returnFirst],s="";return 6!=e.operationtype&&(s+=e.operatorname+"("+e.operatoraccount+") "),s+=n[e.operationtype]+" ",s+=this.pointType[e.transfertype]+" ",2!=e.operationtype&&1!=e.operationtype&&6!=e.operationtype||(s+=lg.withTo+" "+e.customername+"("+e.customeraccount+")"),s||"-"},formatterIncome:function(e,t,r,i){return-1!=[1,4,5].indexOf(e.operationtype)?e.pointnumber:"-"},formatterExpenditure:function(e,t,r,i){return-1!=[2,3,6].indexOf(e.operationtype)?e.pointnumber:"-"}},mounted:function(){this.getList()}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"searchFm",attrs:{model:e.searchFm,inline:!0},nativeOn:{submit:function(t){return t.preventDefault(),e.searchFn.apply(null,arguments)}}},[r("el-form-item",{attrs:{label:e.lg.aimCustomer,prop:"customerid"}},[r("userTreeSelect",{ref:"userTreeComp",on:{selected:e.selected}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lg.from,prop:"starttime"}},[r("el-date-picker",{attrs:{type:"date","value-format":"timestamp","picker-options":e.pickerOptions},on:{change:e.checkedDateTime},model:{value:e.searchFm.starttime,callback:function(t){e.$set(e.searchFm,"starttime",t)},expression:"searchFm.starttime"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lg.to,prop:"endtime"}},[r("el-date-picker",{ref:"endDateTimePicker",attrs:{type:"date","value-format":"timestamp","picker-options":e.pickerOptions},model:{value:e.searchFm.endtime,callback:function(t){e.$set(e.searchFm,"endtime",t)},expression:"searchFm.endtime"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v(e._s(e.lg.check))]),e._v(" "),r("el-button",{on:{click:e.resetFm}},[e._v(e._s(e.lg.reset))])],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.records,stripe:""}},[r("el-table-column",{attrs:{type:"index",align:"center",index:e.indexMethod,label:e.lg.serialNum,width:"48"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createtime",label:e.lg.dateTime,formatter:e.formatterTime,width:"160"}}),e._v(" "),r("el-table-column",{attrs:{prop:"transfertype",label:e.lg.cardType,formatter:e.formatterType}}),e._v(" "),r("el-table-column",{attrs:{prop:"operationtype",label:e.lg.operation,formatter:e.formatterOpt,width:"300"}}),e._v(" "),r("el-table-column",{attrs:{prop:"pointnumber",label:e.lg.income,formatter:e.formatterIncome}}),e._v(" "),r("el-table-column",{attrs:{prop:"pointnumber",label:e.lg.expenditure,formatter:e.formatterExpenditure}}),e._v(" "),r("el-table-column",{attrs:{prop:"aftertransfer",label:e.lg.balance}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:e.lg.remark}}),e._v(" "),r("el-table-column",{attrs:{label:e.lg.operate},scopedSlots:e._u([{key:"default",fn:function(t){return["3"==t.row.operationtype?r("a",{staticClass:"link-btn",on:{click:function(r){return e.showDetail(t.row.historyid)}}},[e._v(e._s(e.lg.detail))]):r("span",[e._v("-")])]}}])})],1),e._v(" "),e.total?r("el-pagination",{attrs:{"page-size":e.pagesize,"page-sizes":e.pagesizes,background:"",layout:"total,sizes,prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e(),e._v(" "),r("historyDetail",{ref:"historyDetailComp"})],1)},staticRenderFns:[]},c=r("VU/8")(o,l,!1,null,null,null);t.default=c.exports},VV4h:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{showDialog:!1}},components:{membershipComp:r("SDaM").default},methods:{setVisible:function(e){this.showDialog=e},getRelationship:function(e){var t=this;this.findObj("membershipComp",this.$refs,function(){t.$refs.membershipComp.getRelationship(e)})},setData:function(e){var t=this;this.findObj("membershipComp",this.$refs,function(){t.$refs.membershipComp.setData(e)})}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"},{name:"mouseClose",rawName:"v-mouseClose"}],attrs:{title:e.lg.membershipCustomer,modal:!0,visible:e.showDialog,width:"600px","append-to-body":!0,"close-on-click-modal":!0},on:{"update:visible":function(t){e.showDialog=t}}},[r("membershipComp",{ref:"membershipComp",attrs:{disabled:!0}})],1)},staticRenderFns:[]},s=r("VU/8")(i,n,!1,null,null,null);t.default=s.exports},YDJs:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"tree-aside-main",class:{"tree-hide":!e.showTree}},[e.hideside?e._e():r("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"tree-panel mr20",attrs:{width:"280px"}},[r("div",{staticClass:"tree-title pl10"},[e._v("\n      "+e._s(e.lg.myCustomer)+"\n      "),e._t("treeTitle"),e._v(" "),r("el-tooltip",{attrs:{content:e.lg.fold,placement:"right"}},[r("i",{staticClass:"fold-icon base-icon",on:{click:function(t){e.showTree=!e.showTree}}})])],2),e._v(" "),r("div",{staticClass:"tree-content"},[e._t("treeContent")],2)]),e._v(" "),e.hideside?e._e():r("el-aside",{directives:[{name:"show",rawName:"v-show",value:!e.showTree,expression:"!showTree"}],staticClass:"tree-hide-panel mr20",attrs:{width:"38px"}},[r("div",{staticClass:"h100b",on:{click:function(t){e.showTree=!e.showTree}}},[r("el-tooltip",{attrs:{content:e.lg.unfold,placement:"right"}},[r("i",{staticClass:"fold-icon unfold-icon base-icon"})]),e._v(" "),r("p",{staticClass:"fold_word"},[e._v(e._s(e.lg.myCustomer))])],1)]),e._v(" "),r("el-main",{staticStyle:{"padding-left":"0"}},[r("el-scrollbar",{staticClass:"h100b hidden-scroll-x"},[e._t("mainContent")],2)],1)],1)},staticRenderFns:[]};var n=r("VU/8")({props:["offset","hideside"],data:function(){return{showTree:!0}}},i,!1,function(e){r("kWfB")},null,null);t.default=n.exports},ZVCO:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Dd8w"),n=r.n(i),s=r("gyMJ"),a={props:["hideSevice","showall"],data:function(){return{type:"",defaulttype:"",showBox:!1,loading:!1,showSupport:!1,serverInfo:"",ownProduct:[],otherProduct:[],searchTxt:""}},computed:{filterOwnProduct:function(){var e=this,t=[];return""==this.$trim(this.searchTxt)?this.ownProduct:(this.ownProduct.forEach(function(r,i){-1!=r.devicetype.toLocaleUpperCase().indexOf(e.searchTxt.toLocaleUpperCase())&&t.push(r)}),t)},filterOtherProduct:function(){var e=this,t=[];return""==this.$trim(this.searchTxt)?this.otherProduct:(this.otherProduct.forEach(function(r,i){-1!=r.devicetype.toLocaleUpperCase().indexOf(e.searchTxt.toLocaleUpperCase())&&t.push(r)}),t)}},methods:{showModel:function(){},hideModel:function(){},selectedFn:function(e,t){var r=this[e][t];this.$emit("selected",r),this.type=r.devicetype,this.serverInfo=r.serverinfo,this.showBox=!1},getModelData:function(){var e=this,t=this.showall?{showall:1}:{};this.loading=!0,Object(s._9)(n()({},t)).then(function(t){e.ownProduct=t.ourtype,e.otherProduct=t.othertype,e.loading=!1}).catch(function(t){e.loading=!1})},getSupportedFn:function(){var e=this;Object(s._65)({},{errorHide:!1}).then(function(t){t.showsupporteddevices&&(t.notshowsupporteddevicelist.includes(location.host)&&(e.showSupport=!1),e.showSupport=!0)}).catch(function(e){})},setDefault:function(e,t){this.defaulttype=e},clearFn:function(){this.type="",this.defaulttype=""}},mounted:function(){var e=this;this.$nextTick(function(){e.getModelData(),e.getSupportedFn()})}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"model-select-comp"},[r("div",{staticClass:"model-cur-box"},[r("el-popover",{attrs:{placement:"bottom","visible-arrow":!1,"popper-class":"model-select-popover",width:"540",trigger:"click"},model:{value:e.showBox,callback:function(t){e.showBox=t},expression:"showBox"}},[r("div",{staticClass:"model-content"},[r("el-input",{ref:"searchInput",attrs:{placeholder:e.lg.targetType,"prefix-icon":"search-icon base-icon",clearable:!0},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"model-list"},[r("el-scrollbar",[r("el-row",{staticStyle:{"border-bottom":"1px dashed #ccc"}},e._l(e.filterOwnProduct,function(t,i){return r("el-col",{key:t.devicetype,staticClass:"model-item",attrs:{span:4}},[r("el-button",{staticClass:"model-select-option",attrs:{type:"text"},on:{click:function(t){return e.selectedFn("filterOwnProduct",i)}}},[e._v(e._s(t.devicetype))])],1)}),1),e._v(" "),r("el-row",e._l(e.filterOtherProduct,function(t,i){return r("el-col",{key:t.devicetype,staticClass:"model-item",attrs:{span:4}},[r("el-button",{staticClass:"model-select-option",attrs:{type:"text"},on:{click:function(t){return e.selectedFn("filterOtherProduct",i)}}},[e._v(e._s(t.devicetype))])],1)}),1)],1)],1)],1),e._v(" "),r("el-input",{staticClass:"select-input",staticStyle:{width:"240px"},attrs:{slot:"reference",placeholder:e.defaulttype?e.defaulttype:e.lg.select,readonly:"","suffix-icon":e.showBox?"el-icon-arrow-up":"el-icon-arrow-down"},nativeOn:{click:function(t){return e.showModel.apply(null,arguments)}},slot:"reference",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),e._v(" "),e.hideSevice?e._e():[e.showSupport?r("a",{staticClass:"ml10 link-btn ico-link",attrs:{href:"/devicelist.html",target:"_blank"}},[e._v(e._s(e.lg.supportedDevices)+" »")]):e._e(),e._v(" "),r("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.serverInfo,expression:"serverInfo"}],staticClass:"server-info mt5 no-bg",attrs:{type:"info",closable:!1,"show-icon":"",title:e.lg.serverInfo+": "+e.serverInfo}})]],2)])},staticRenderFns:[]};var l=r("VU/8")(a,o,!1,function(e){r("NYTC")},null,null);t.default=l.exports},bOdI:function(e,t,r){"use strict";t.__esModule=!0;var i,n=r("C4MV"),s=(i=n)&&i.__esModule?i:{default:i};t.default=function(e,t,r){return t in e?(0,s.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},eInf:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={props:["record"],data:function(){return{detailVisible:!1}},components:{deviceDetail:function(){return r.e(78).then(r.bind(null,"QmMy")).catch()}},methods:{showDetail:function(){var e=this.record;if(e.deviceid){this.detailVisible=!0,this.$emit("dialogShow",this.$refs.imeiDialog);var t=this;this.findObj("deviceDetailComp",this.$refs,function(){t.$refs.deviceDetailComp.getDetail(e.deviceid)})}}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"link-btn",on:{click:e.showDetail}},[e._v("\n  "+e._s(e.record.imei)+"\n  "),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"},{name:"mouseClose",rawName:"v-mouseClose"}],ref:"imeiDialog",attrs:{title:e.lg.target,visible:e.detailVisible,"append-to-body":!0,modal:!0,"show-close":!0,top:"10vh",width:"700px"},on:{"update:visible":function(t){e.detailVisible=t}}},[r("deviceDetail",{ref:"deviceDetailComp"})],1)],1)},staticRenderFns:[]},s=r("VU/8")(i,n,!1,null,null,null);t.default=s.exports},"fY/y":function(e,t){},g5iy:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Rpa2"),n=r("gyMJ"),s=r("iKHV"),a={props:["transfertype"],data:function(){var e=this,t={customerid:function(t,r,i){""===(r=e.$trim(r))?i(new Error(lg.selectCustomer)):i()},imeis:function(t,r,i){""===(r=e.$trim(r))?i(new Error(lg.inputImeiError)):i()}};return{showadd:!1,transferFm:{customerid:"",imeis:"",remark:""},balance:0,btnloading:!1,rules:{customerid:[{required:!0,validator:t.customerid,trigger:"blur"},{validator:t.customerid,trigger:"change"}],imeis:[{required:!0,validator:t.imeis,trigger:"blur"}]}}},components:{userTreeSelect:i.default},computed:{loginId:function(){return this.$store.state.customerInfo.id}},methods:{selectedFn:function(e){this.transferFm.customerid=e.customerid},setVisible:function(e){this.showadd=e},getBalance:function(){var e=this;Object(n._102)({customerid:this.loginId}).then(function(t){e.balance=t.transfercardpoint}).catch(function(){})},onSubmit:function(){var e=this,t=this.checkParams();t&&(this.btnloading=!0,Object(n.k)(t,{errorHide:!0}).then(function(t){var r;0==t.errorcode?(r=t.exist&&t.exist>0?lg.total+":"+e.getTotal(1)+".<br />Success:"+(e.getTotal(2)-parseInt(t.exist))+".<br />Existed:"+t.exist+".<br />Existed "+t.msg.split(",").join("<br />"):lg.total+":"+e.getTotal(1)+".<br />Success:"+(e.getTotal(2)-parseInt(t.exist))+"."+(t.msg?"("+t.msg+")":""),e.$message({dangerouslyUseHTMLString:!0,type:"success",duration:0,showClose:!0,message:r}),e.getBalance(),e.fmReset(),e.showadd=!1,e.btnloading=!1,e.$emit("addSuccess")):e.$message({dangerouslyUseHTMLString:!0,type:"error",duration:0,showClose:!0,message:lg[t.errorcode]+(t.msg?"<br />"+t.msg.split(",").join("<br />"):"")});e.btnloading=!1}).catch(function(){e.btnloading=!1}))},showList:function(){this.$emit("showList")},getTotal:function(e){var t=this.$trim(this.transferFm.imeis);return t=t.replaceAll("\n",",").split(","),"1"==e?t.length:"2"==e?this.unique(t).length:void 0},checkParams:function(){var e=this.transferFm.customerid,t=this.transfertype,r=this.$trim(this.transferFm.imeis),i=this.$trim(this.transferFm.remark);if(!e)return this.$message.error(lg.selectCustomer),!1;if(!t)return this.$message.error("type error."),!1;if(!r)return this.$message.error(lg.inputImeiError),!1;if((r=this.formatImeis(r)).length>200)return this.$message.error(lg.maxImeiNum.replace("{num}",200)),!1;var n=Object(s.g)(r);return n.rs?{customerid:e,transfertype:t,imeis:n.imeis.join(","),remark:i}:(this.$message.error(lg[20053]+"("+n.imeis[n.imeis.length-1]+")"),!1)},fmReset:function(){this.$refs.transferFm.resetFields(),this.$refs.userTreeComp.clearFn()},cancelFn:function(){this.setVisible(!1),this.fmReset()},dialogCloseFn:function(){this.fmReset()}},mounted:function(){this.getBalance()}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"},{name:"mouseClose",rawName:"v-mouseClose"}],attrs:{title:e.lg.add,visible:e.showadd,modal:!0,"show-close":!0,width:"620px","append-to-body":!0},on:{"update:visible":function(t){e.showadd=t},closed:e.dialogCloseFn}},[r("div",{staticClass:"submit-from-box"},[r("el-form",{ref:"transferFm",attrs:{rules:e.rules,model:e.transferFm},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[r("el-form-item",{attrs:{label:e.lg.balance}},[e._v("\n        "+e._s(e.balance)+"\n      ")]),e._v(" "),r("el-form-item",{attrs:{label:"Apply account",prop:"customerid"}},[r("userTreeSelect",{ref:"userTreeComp",on:{selected:e.selectedFn}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lg.imei,required:"",prop:"imeis"}},[r("el-input",{directives:[{name:"showClear",rawName:"v-showClear"}],attrs:{type:"textarea"},on:{blur:function(t){return e.trimImeiInput("transferFm","imeis")}},model:{value:e.transferFm.imeis,callback:function(t){e.$set(e.transferFm,"imeis",t)},expression:"transferFm.imeis"}}),e._v(" "),r("el-alert",{attrs:{closable:!1,"show-icon":"",type:"info"}},[r("template",{slot:"title"},[r("div",{staticClass:"limitTips"},[e._v("One line one IMEI.")]),e._v(" "),r("div",{staticClass:"limitTips"},[e._v(e._s(e.lg.maxImeiNum.replace("{num}",200)))])])],2)],1),e._v(" "),r("el-form-item",{attrs:{label:e.lg.remark,prop:"remark"}},[r("el-input",{attrs:{type:"textarea"},on:{blur:function(t){return e.$trimFn("transferFm","remark")}},model:{value:e.transferFm.remark,callback:function(t){e.$set(e.transferFm,"remark",t)},expression:"transferFm.remark"}})],1),e._v(" "),r("el-form-item",{staticClass:"tools"},[r("el-button",{attrs:{type:"primary","native-type":"submit",loading:e.btnloading}},[e._v(e._s(e.lg.submit))]),e._v(" "),r("el-button",{on:{click:e.cancelFn}},[e._v(e._s(e.lg.cancel))])],1)],1)],1)])},staticRenderFns:[]},l=r("VU/8")(a,o,!1,null,null,null);t.default=l.exports},gFTv:function(e,t){},iKHV:function(e,t,r){"use strict";r.d(t,"d",function(){return i}),r.d(t,"i",function(){return n}),r.d(t,"j",function(){return s}),r.d(t,"a",function(){return a}),r.d(t,"m",function(){return o}),r.d(t,"b",function(){return l}),r.d(t,"l",function(){return c}),r.d(t,"k",function(){return u}),r.d(t,"f",function(){return d}),r.d(t,"h",function(){return h}),r.d(t,"g",function(){return m}),r.d(t,"e",function(){return f}),r.d(t,"n",function(){return p}),r.d(t,"c",function(){return v}),r.d(t,"o",function(){return b});var i=function(e){return!(!e||!/^([0-9A-Za-z\_\@\.]){2,30}$/.test(e))},n=function(e){return!!(e&&e.length<=20&&e.length>=6)},s=function(e){return"123456"!=e},a=100,o=64,l=150,c=function(e){return!!e.match(/^(\+[0-9]{1,20}|[0-9]{1,21})$/)},u=function(e){return e.indexOf("@")>0&&e.indexOf(".")>0&&!!e.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)},d=function(e){return/(^[a-zA-Z\d]{6,15}$)/.test(e)},h=function(e){return/(^[a-zA-Z\d]{5,18}$)/.test(e)},m=function(e){for(var t,r=[],i=!0,n=0,s=e.length;n<s;n++)if(t=e[n].replace(/^\s+|\s+$/gm,""),r.push(t),!d(t)){i=!1;break}return{imeis:r,rs:i}},f=function(e){return!!(/^\d+(\.5)?$/.test(e)&&parseInt(e)>=0&&parseInt(e)<=5e3)},p=function(e,t){var r={beginTime:(t=t||"")?new Date(new Date(t).getTime()).setHours(0,0,0,0):(new Date).getTime()};return r.endTime=r.beginTime+864e5*e-1,r},g=function(e,t){if(e+="",t||(t=0),-1==e.indexOf(".")&&(e+="."),e+=new Array(t+1).join("0"),new RegExp("^(-|\\+)?(\\d+(\\.\\d{0,"+(t+1)+"})?)\\d*$").test(e)){e="0"+RegExp.$2;var r=RegExp.$1,i=RegExp.$3.length,n=!0;if(i==t+2){if(i=e.match(/\d/g),parseInt(i[i.length-1])>4)for(var s=i.length-2;s>=0&&(i[s]=parseInt(i[s])+1,10==i[s]);s--)i[s]=0,n=1!=s;e=i.join("").replace(new RegExp("(\\d+)(\\d{"+t+"})\\d$"),"$1.$2")}return n&&(e=e.substr(1)),parseFloat((r+e).replace(/\.$/,""))}return e+""},v=function(e,t,r){return 0==e&&"temperature"!=t||void 0===r?e:"distance"==t?g("2"==r?.621*e:e,2):"pressure"==t?["",g(.145*e,2),g(.01*e,2),g(e,2)][r]:"capacity"==t?["",g(e,2),g(.264*e,2),g(.22*e,2)][r]:"temperature"==t?g("2"==r?1.8*e+32:e,2):"fuelefficiency"==t?["",g(e,2),g(62.1/(.264*e),2),g(62.1/(.22*e),2)][r]:e},b=function(e,t,r){return 0==e&&"temperature"!=t||void 0===r?e:"distance"==t&&1!=r?g(e/.621,2):"pressure"==t?["",g(e/.145,2),g(e/.01,2),g(e,2)][r]:"capacity"==t?["",g(e,2),g(e/.264,2),g(e/.22,2)][r]:"temperature"==t?g("2"==r?(e-32)/1.8:e,2):"fuelefficiency"==t?["",g(e,2),g(62.1/(.264*e),2),g(62.1/(.22*e),2)][r]:e}},jb42:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=["",lg.gradeDealer,lg.gradeUser,lg.gradeVirtual]},kWfB:function(e,t){},mClu:function(e,t,r){var i=r("kM2E");i(i.S+i.F*!r("+E39"),"Object",{defineProperty:r("evD5").f})},"oW+X":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Rpa2"),n=r("gyMJ"),s={props:["defaultUserInfo"],data:function(){var e=this,t={objectid:function(e,t,r){""===t&&r(new Error("请选择类型"))},quantity:function(t,r,i){r=e.$trim(r),/^\d{1,}$/.test(r)?r>5e4?i(new Error("最大数量不能超过5w")):i():i(new Error(lg.dataFormatError))}};return{showadd:!1,addFm:{customerid:"",objectid:"",quantity:"",remark:""},typeArr:[],transfertype:"",btnloading:!1,rules:{customerid:[{required:!0,message:lg.inputTargetCustomer,trigger:"blur"}],objectid:[{required:!0,validator:t.objectid,trigger:"change"}],quantity:[{required:!0,validator:t.quantity,trigger:"blur"},{required:!0,validator:t.quantity,trigger:"keyup"}]}}},components:{userTreeSelect:i.default},computed:{loginId:function(){return this.$store.state.customerInfo.id}},methods:{selectedFn:function(e){this.addFm.customerid=e.customerid},setVisible:function(e){this.showadd=e},getTypeList:function(){var e=this;Object(n._107)().then(function(t){e.typeArr=t.record}).catch(function(){})},onSubmit:function(){var e=this,t=this.checkParams();t&&(this.btnloading=!0,Object(n._108)(t).then(function(t){e.btnloading=!1,e.$message.success(lg.success),e.fmReset(),e.showList()}).catch(function(){e.btnloading=!1}))},showList:function(){this.$emit("showList")},getTotal:function(e){var t=this.$trim(this.addFm.imeis);return t=t.replaceAll("\n",",").split(","),"1"==e?t.length:"2"==e?this.unique(t).length:void 0},checkParams:function(){var e=this.addFm.customerid,t=this.addFm.objectid,r=this.$trim(this.addFm.quantity),i=this.$trim(this.addFm.remark);return this.addFm.customerid?t?/^\d{1,}$/.test(r)?r>5e4?(this.$message.error("最大数量不能超过5w"),!1):{customerid:e,objectid:t,quantity:r,remark:i}:(this.$message.error(lg.dataFormatError),!1):(this.$message.error("请选择类型"),!1):(this.$message.error(lg.inputTargetCustomer),!1)},fmReset:function(){this.$refs.addFm.resetFields(),this.$refs.userTreeComp.clearFn()},cancelFn:function(){this.setVisible(!1),this.fmReset()},dialogCloseFn:function(){this.fmReset()}},mounted:function(){this.getTypeList()}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"submit-from-box"},[r("el-form",{ref:"addFm",attrs:{rules:e.rules,model:e.addFm},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[r("el-form-item",{attrs:{label:e.lg.aimCustomer,required:"",prop:"customerid"}},[r("userTreeSelect",{ref:"userTreeComp",attrs:{defaultUserInfo:e.defaultUserInfo},on:{selected:e.selectedFn}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lg.type,prop:"objectid"}},[r("el-select",{attrs:{placeholder:e.lg.selectHint},model:{value:e.addFm.objectid,callback:function(t){e.$set(e.addFm,"objectid",t)},expression:"addFm.objectid"}},e._l(e.typeArr,function(t){return r("el-option",{key:t.objectid,attrs:{value:t.objectid,label:e.lg[t.i18nkey]}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.lg.number,prop:"quantity"}},[r("el-input",{on:{blur:function(t){return e.$trimFn("addFm","quantity")}},model:{value:e.addFm.quantity,callback:function(t){e.$set(e.addFm,"quantity",t)},expression:"addFm.quantity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lg.remark,prop:"remark"}},[r("el-input",{attrs:{type:"textarea"},on:{blur:function(t){return e.$trimFn("addFm","remark")}},model:{value:e.addFm.remark,callback:function(t){e.$set(e.addFm,"remark",t)},expression:"addFm.remark"}})],1),e._v(" "),r("el-form-item",{staticClass:"tools"},[r("el-button",{attrs:{type:"primary","native-type":"submit",loading:e.btnloading}},[e._v(e._s(e.lg.submit))]),e._v(" "),r("el-button",{on:{click:e.fmReset}},[e._v(e._s(e.lg.reset))])],1)],1)],1)},staticRenderFns:[]},o=r("VU/8")(s,a,!1,null,null,null);t.default=o.exports},sQMB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("iKHV"),n=r("gyMJ"),s={props:["imeis"],data:function(){return{records:[],visible:!1,loading:!1,oPlatform:{"-1":lg.noSuchIMEI,0:lg.notInBlackList,1:"Protrack",2:"Itrack/SWD",3:"ProtrackAsia"}}},computed:{hasAuth:function(){return this.$store.state.functions&&this.$store.state.functions.checkinwhitelist}},methods:{getInfo:function(){var e=this;if(this.loading=!0,!this.imeis||!Object(i.h)(this.imeis))return this.$message.error(lg[20053]);Object(n.M)({imeis:this.imeis}).then(function(t){e.records=t.record,e.loading=!1}).catch(function(t){e.loading=!1})},fmtPlatform:function(e,t,r,i){return this.oPlatform[r]},fmtTime:function(e,t,r,i){return r?this.utcToLocal(r):"-"},hide:function(){this.records=[]}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.hasAuth?r("el-popover",{attrs:{"popper-class":"platform-popover",placement:"bottom",target:"manual",width:"550"},on:{"after-leave":e.hide},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("el-button",{staticClass:"popver-close-btn",attrs:{type:"info",round:"",icon:"el-icon-close"},on:{click:function(t){e.visible=!1}}}),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.records,stripe:""}},[r("el-table-column",{attrs:{type:"index",align:"center",label:e.lg.serialNum,width:"48"}}),e._v(" "),r("el-table-column",{attrs:{prop:"imei",label:"IMEI",width:"160"}}),e._v(" "),r("el-table-column",{attrs:{prop:"type",label:e.lg.platform,formatter:e.fmtPlatform}}),e._v(" "),r("el-table-column",{attrs:{prop:"importTime",label:e.lg.importTime,formatter:e.fmtTime,width:"160"}})],1),e._v(" "),r("a",{staticClass:"link-btn",attrs:{slot:"reference"},on:{click:e.getInfo},slot:"reference"},[e._v("查看所属平台"),r("i",{staticClass:"el-icon-d-arrow-right",staticStyle:{"font-size":"11px"}})])],1):e._e()},staticRenderFns:[]};var o=r("VU/8")(s,a,!1,function(e){r("gFTv")},null,null);t.default=o.exports},xpps:function(e,t,r){"use strict";var i=r("KvKp");t.a={data:function(){return{$_resizeHandler:null}},mounted:function(){this.initListener()},activated:function(){this.$_resizeHandler||this.initListener(),this.resize()},beforeDestroy:function(){this.destroyListener()},deactivated:function(){this.destroyListener()},methods:{initListener:function(){var e=this;this.$_resizeHandler=Object(i.a)(function(){e.resize()},100),window.addEventListener("resize",this.$_resizeHandler)},destroyListener:function(){window.removeEventListener("resize",this.$_resizeHandler),this.$_resizeHandler=null}}}},zAgK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("bOdI"),n=r.n(i),s=r("gyMJ"),a=r("KvKp"),o={props:["treeType","showCheckbox","rightClickFlag"],data:function(){return{treetype:"1",orderKey:"name",orderType:"asc",firstNode:null,firstResolve:null,deviceid:"",rightDisplay:!1,rightClickStatus:!1,hideRightTime:null,hoverRightTime:null,treeShow:!0,curUserId:"",optionleft:-1e4,optiontop:-1e4,defaultExpand:[],clickNum:0,dbClickTimeObj:null,defaultProps:{label:"name",children:[],isLeaf:"leaf"},refreshFlag:!1,loading:!1}},computed:{loginId:function(){return this.$store.state.customerInfo.id},firstData:function(){return this.$store.state.tree.first},childData:function(){return this.$store.state.tree.child}},components:{treeRight:function(){return r.e(132).then(r.bind(null,"XeIX"))}},methods:{reloadTree:function(e){this.treetype!=e&&(this.refreshFlag=!0,this.treetype=e||"1",this.loadNode(this.firstNode,this.firstResolve))},reloadTreeParent:function(){if(this.orderKey=Object(a.c)("treeCustomerOrderBy")||"name",this.orderType=Object(a.c)("treeCustomerOrderType")||"asc",this.curUserId){this.refreshFlag=!0;var e=this.$refs.tree.getNode(this.curUserId);e.parent.loaded=!1,e.parent.expand()}},refresh:function(){if(this.curUserId){this.refreshFlag=!0;var e=this.$refs.tree.getNode(this.curUserId);this.getSelfData(e),e.loaded=!1,e.expand()}},refreshNode:function(e,t){this.refreshFlag=!0,this.getSelfData(t),t.loaded=!1,t.expand(),e.stopPropagation()},refreshSelf:function(){if(this.curUserId){var e=this.$refs.tree.getNode(this.curUserId);this.getSelfData(e)}},loadNode:function(e,t){0===e.level?(this.firstNode=e,this.firstResolve=t,this.firstNode.childNodes=[],this.getFirstData(t)):e.level>=1&&this.getChildData(e,t)},getSelfData:function(e){var t=this;Object(s._155)({customerid:e.data.id,treetype:this.treetype}).then(function(r){var i=r.record;e.data.name=("account"==t.orderKey?i.account:i.name)+"("+i.ownnum+"/"+i.totalnum+")",e.data.account=i.account,e.data.role=i.role,e.data.roletype=i.roletype,e.data.type=i.type,e.data.isread=i.isread,e.data._name=i._name}).catch(function(e){})},getFirstData:function(e){var t=this,r=1==this.treetype;this.firstData&&r?this.renderFirst(e,this.firstData):(this.loading=!0,this.$store.dispatch("getTreeFirst",{param:{customerid:this.loginId,treetype:this.treetype},save:r}).then(function(r){t.renderFirst(e,r.record),t.loading=!1,t.$emit("treeLoaded")}).catch(function(e){t.loading=!1}))},renderFirst:function(e,t){var r;e([(r={id:t.customerid,name:t.name+"("+t.ownnum+"/"+t.totalnum+")",_name:t.name,account:t.account,leaf:!t.hadchild,type:t.type,role:t.role,roletype:t.roletype},n()(r,"_name",t.name),n()(r,"isread",t.isread),r)]),t.hadchild&&!this.inArray(this.defaultExpand,t.customerid)&&this.defaultExpand.push(t.customerid);var i=this;setTimeout(function(){i.$refs.tree.setCurrentKey(t.customerid)},0)},getChildData:function(e,t){var r=this,i=1==e.level&&1==this.treetype;this.childData&&i&&!this.refreshFlag?this.renderChild(e,t,this.childData):this.$store.dispatch("getTreeChild",{param:{customerid:e.data.id,puretree:1,treetype:this.treetype},save:i}).then(function(i){if(r.refreshFlag=!1,!i.record)return t([]);r.renderChild(e,t,i.record)}).catch(function(e){r.refreshFlag=!1})},renderChild:function(e,t,r){for(var i=[],n=0,s=(r=this.treeSortor(r)).length;n<s;n++)i.push({id:r[n].id,name:("account"==this.orderKey?r[n].account:r[n].name)+"("+r[n].ownnum+"/"+r[n].totalnum+")",account:r[n].account,leaf:!r[n].hadchild,type:r[n].type,role:r[n].role,roletype:r[n].roletype,_name:r[n].name,isread:r[n].isread});t(i)},treeSortor:function(e){var t,r=this;switch(r.orderKey){case"name":case"account":return e.sort(function(e,i){return t=e[r.orderKey].localeCompare(i[r.orderKey]),"asc"==r.orderType?t:-t});case"id":case"ownnum":case"totalnum":return e.sort(function(e,i){return t=e[r.orderKey]-i[r.orderKey],"asc"==r.orderType?t:-t});default:return e}},renderContent:function(e,t){var r=this,i=t.node,n=t.data,s=(t.store,void 0),a="",o=n._name+"("+n.account+")";return"1"==n.role?s=e("div",{class:"custom-tree-node fl",directives:[{name:"tip",value:["<div style=\"padding-left:20px;background-image:url('/dealer/images/vip.png');background-repeat:no-repeat;background-position:-6px -2px;\">"+lg.superAdmin+"</div>","<div>"+o+"</div>"].join("\n")}]},[e("div",{class:"custom-tree-node-cont"},[e("i",{class:"tree-icon "+(n.leaf?"userIcon"+n.type:"userIconArr"+n.type)}),e("span",{class:"tree-node-word "+("1"==n.role?"red":"")},[n.name]),this.rightClickFlag?e("span",{class:"el-icon-more-v",on:{click:function(e){return r.clickShowMore(e,n)}}}):e("span",{class:"tree-refresh el-icon-refresh",on:{click:function(e){return r.refreshNode(e,i)}}})])]):(a=n.leaf?"userIcon"+n.type:"userIconArr"+n.type,1==n.isread&&(1==n.type&&(a="dealerIconReadonly"),2==n.type&&(a="userIconReadonly")),s=e("div",{class:"custom-tree-node fl",directives:[{name:"tip",value:o}]},[e("div",{class:"custom-tree-node-cont"},[e("i",{class:"tree-icon "+a}),e("span",{class:"tree-node-word"},[n.name]),this.rightClickFlag?e("span",{class:"el-icon-more-v",on:{click:function(e){return r.clickShowMore(e,n)},mouseover:function(e){return r.hoverShowMore(e,n)},mouseout:function(e){return r.hoverHideMore(e,n)}}}):e("span",{class:"tree-refresh el-icon-refresh",on:{click:function(e){return r.refreshNode(e,i)}}})])])),s},clickShowMore:function(e,t){this.rightClickStatus=!0,this.showRightClick(e,t),e.stopPropagation()},hoverShowMore:function(e,t){if(clearTimeout(this.hideRightTime),!this.rightClickStatus){var r=this;this.hoverRightTime=setTimeout(function(){r.showRightClick(e,t)},300),e.stopPropagation()}},hoverHideMore:function(){clearTimeout(this.hoverRightTime);var e=this;this.hideRightTime=setTimeout(function(){e.hideRightOption()},500)},hideRightOption:function(){this.rightDisplay=!1,document.body.onclick=null,this.rightClickStatus=!1},rightOptionHover:function(){clearTimeout(this.hideRightTime)},rightOptionHoverOut:function(){var e=this;this.hideRightTime=setTimeout(function(){e.hideRightOption()},500)},rightClick:function(e,t){this.rightClickStatus=!0,this.showRightClick(e,t)},showRightClick:function(e,t){if(this.rightClickFlag){this.rightDisplay=!0;var r=this;setTimeout(function(){var i=r.$refs.treeRightComp.$el.offsetHeight,n=document.documentElement.clientHeight;r.optiontop=e.clientY+i>n?e.clientY-i:e.clientY,r.optionleft=e.clientX+15,r.$refs.treeRightComp.setData(t)},0),this.curUserId=t.id,document.body.onclick=function(){r.hideRightOption()}}},handleCheckChange:function(e,t,r){var i=this.$refs.tree.getCheckedNodes(),n=this.$refs.tree.getCheckedKeys();this.$emit("checkChange",{obj:i,key:n})},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)},nodeClick:function(e,t,r){for(var i=t,n=[e.id];i&&i.parent&&i.parent.data;)n.push(i.parent.data.id),i=i.parent;this.$emit("treeNodeClick",e,n),this.curUserId=e.id,this.rightDisplay=!1,this.dbClick(window.event,e,t,r)},dbClick:function(e,t,r,i){if(e){this.clickNum++,2==this.clickNum&&(this.rightClickStatus=!0,this.showRightClick(e,t,r,i));var n=this;clearTimeout(this.dbClickTimeObj),this.dbClickTimeObj=setTimeout(function(){n.clickNum=0},500)}},selectTreeNode:function(e,t){var r="string"==typeof e.customers?e.customers.split(",").reverse().map(Number):e.customers,i=r.pop();this.defaultExpand=r;var n=this;!function e(){var r=n.$refs.tree.getNode(i);if(r&&!n.loading){if(n.$refs.tree.setCurrentKey(r.key),n.nodeClick(r.data,r),t){var s=n.$refs.tree.getCheckedKeys()||[];s.push(r.key),n.$refs.tree.setCheckedKeys(s)}}else setTimeout(function(){e()},200)}()},getCurrentNode:function(){return this.$refs.tree.getCurrentNode()},nodeExpandFn:function(e,t){this.defaultExpand.push(e.id),this.$emit("expanded")},nodeCollapseFn:function(e){this.defaultExpand.splice(this.defaultExpand.indexOf(e.id),1),this.$emit("collapse")}},mounted:function(){this.curUserId=this.loginId},created:function(){this.treetype=this.treeType?this.treeType:"1",this.orderKey=Object(a.c)("treeCustomerOrderBy")||"name",this.orderType=Object(a.c)("treeCustomerOrderType")||"asc"}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tree-comp"},[r("el-tree",{directives:[{name:"show",rawName:"v-show",value:e.treeShow,expression:"treeShow"}],ref:"tree",attrs:{lazy:"",load:e.loadNode,props:e.defaultProps,"node-key":"id","default-expanded-keys":e.defaultExpand,"empty-text":e.lg.noData,accordion:!0,"expand-on-click-node":!1,"highlight-current":!0,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,"check-strictly":!0,"check-on-click-node":!0},on:{"node-click":e.nodeClick,"node-contextmenu":e.rightClick,"check-change":e.handleCheckChange,"node-expand":e.nodeExpandFn,"node-collapse":e.nodeCollapseFn}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.rightDisplay,expression:"rightDisplay"}],staticClass:"tree-right-option",style:{left:e.optionleft+"px",top:e.optiontop+"px"}},[r("treeRight",{ref:"treeRightComp",on:{reloadTreeParent:e.reloadTreeParent,refresh:e.refresh,refreshSelf:e.refreshSelf,mouseEnterEv:e.rightOptionHover,mouseLeaveEv:e.rightOptionHoverOut}})],1)],1)},staticRenderFns:[]};var c=r("VU/8")(o,l,!1,function(e){r("UdMx")},null,null);t.default=c.exports}});