webpackJsonp([134],{KB7B:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("gyMJ"),i={data:function(){return{records:[],start:0,pagesize:2,countunread:5,countread:5,loading:!1,dialogVisible:!1}},components:{messageComp:function(){return s.e(5).then(s.bind(null,"Xu8Z")).catch()},detailComp:function(){return s.e(81).then(s.bind(null,"aPDQ")).catch()}},methods:{refreshFn:function(){this.getList()},getList:function(){var e=this;this.loading=!0,Object(a._54)({countunread:this.countunread,countread:this.countread}).then(function(t){e.loading=!1,e.packRecord(t)}).catch(function(){e.loading=!1})},readFn:function(e){var t=this;"1"!=e.readstatus&&Object(a._113)({messageid:e.messageid}).then(function(s){t.$set(e,"readstatus",1)}).catch(function(){})},packRecord:function(e){var t=e.unreadList,s=e.readList;this.records=t.concat(s)},showMessage:function(){this.$refs.messageComp.setVisible(!0)},showMessageDetail:function(e){this.dialogVisible=!0;var t=this;setTimeout(function(){t.$refs.detailComp.setData(e)},0),this.readFn(e)}},mounted:function(){this.getList()}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home-message"},[s("h3",{staticClass:"nobg-title"},[e._v(e._s(e.lg.message))]),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ds-message-box"},[e._l(e.records,function(t,a){return a<3?s("div",{key:t.messageid,staticClass:"row-item",class:{"not-read":"0"==t.readstatus},on:{click:function(s){return e.showMessageDetail(t)}}},[s("p",{staticClass:"item-time"},[e._v(e._s(e.utcToLocal(t.createtime)))]),e._v(" "),s("p",{staticClass:"item-content"},[e._v(e._s(t.content))])]):e._e()}),e._v(" "),0==e.records.length?s("div",{staticClass:"el-table__empty-text"},[s("div",[e._v(e._s(e.lg.noData))])]):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.records.length,expression:"records.length != 0"}],staticClass:"tr ds-message-more"},[s("el-button",{attrs:{type:"text"},on:{click:e.showMessage}},[e._v(e._s(e.lg.more)),s("i",{staticClass:"el-icon-arrow-right"})])],1)],2),e._v(" "),s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"},{name:"mouseClose",rawName:"v-mouseClose"}],attrs:{title:e.lg.message,visible:e.dialogVisible,modal:!0,"show-close":!0,width:"600px","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("detailComp",{ref:"detailComp"})],1),e._v(" "),s("messageComp",{ref:"messageComp"})],1)},staticRenderFns:[]};var o=s("VU/8")(i,n,!1,function(e){s("meGG")},null,null);t.default=o.exports},meGG:function(e,t){}});