webpackJsonp([79],{TqR5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("vgQg"),n=a("gyMJ"),o=a("iKHV"),i={props:["hideSet","isDialog"],data:function(){return{dialogVisible:!1,fromData:{},customerid:"",timezoneArr:[],btnloading:!1,loading:!1,originalurl:"",thumbnailurl:"",showNullimg:!1}},computed:{customerInfo:function(){return this.$store.state.customerInfo},loginId:function(){return this.$store.state.customerInfo.id},token:function(){return this.getCookie("token")},headers:function(){return{lang:this.$lang,version:2}}},components:{uploadComp:function(){return a.e(84).then(a.bind(null,"DReV")).catch()}},methods:{getInfo:function(t){var e=this;if(!t)return this.$message.error(lg[10005]);this.customerid!=t&&(this.customerid=t,this.loading=!0,Object(n._67)({customerid:t}).then(function(t){e.fromData=t.record,e.loading=!1,e.$refs.imgUploadComp.setData({customerid:e.customerid,originalurl:e.fromData.portrait,thumbnailurl:e.fromData.thumbnailportrait})}).catch(function(t){e.loading=!1}))},onSubmit:function(){var t=this,e=this.checkParams();e&&(e.name||(this.fromData.name=this.fromData.account,e.name=this.fromData.name),this.btnloading=!0,Object(n._17)(e).then(function(a){t.$message.success(lg.updateAccount),t.$emit("successCb",e),t.btnloading=!1}).catch(function(e){t.btnloading=!1}),this.countEvent({action:"编辑用户资料",opt_label:"点击",val:"Dealer2"}))},fmReset:function(){this.$refs.fmComp.resetFields(),this.fromData={},this.customerid=""},checkParams:function(){var t=this.$trim(this.fromData.name),e=this.$trim(this.fromData.contact),a=this.$trim(this.fromData.phone),r=this.$trim(this.fromData.telphone),n=this.$trim(this.fromData.email),i=this.$trim(this.fromData.address),s=this.$trim(this.fromData.webpage);if(t.length>=o.a)return this.$message.error(lg.lengthlimit.replace("{{name}}",lg.customerName).replace("{{num}}",o.a)),!1;if(e&&e.length>64)return this.$message.error(lg.lengthlimit.replace("{{name}}",lg.contact).replace("{{num}}",64)),!1;if(this.customerid==this.loginId&&!n)return this.$message.error(lg.emailNull),!1;if(n&&!Object(o.k)(n))return this.$message.error(lg.emailFormatError),!1;if(i&&i.length>150)return this.$message.error(lg.lengthlimit.replace("{{name}}",lg.address).replace("{{num}}",150)),!1;var l={customerid:this.customerid,name:t,type:this.fromData.type,timezone:this.fromData.timezone,contact:e,phone:a,telphone:r,email:n,address:i,webpage:s};return"2"==this.fromData.type&&this.fromData.isread&&(l.isread=this.fromData.isread),l},setDataAfterUpload:function(t){this.fromData.portrait=t.portrait,this.fromData.thumbnailportrait=t.thumbnailportrait,this.showNullimg=!t.thumbnailportrait,this.customerid==this.loginId&&(this.$store.state.customerInfo.portrait=t.portrait,this.$store.state.customerInfo.thumbnailportrait=t.thumbnailportrait)},cancelFn:function(){this.$emit("closeDialog"),this.fmReset()},dialogCloseFn:function(){this.fmReset()}},mounted:function(){this.timezoneArr=r.d}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"submit-from-box user-info"},[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:!t.customerInfo.email&&t.customerid==t.loginId,expression:"!customerInfo.email && customerid == loginId"}],staticClass:"tips-page",attrs:{title:t.lg.contactNullTips,closable:!1,"show-icon":"",type:"warning"}}),t._v(" "),a("el-form",{ref:"fmComp",attrs:{model:t.fromData,"label-width":"140px"},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticStyle:{width:"99%","margin-left":"0"},attrs:{label:t.lg.account}},[a("copy",{attrs:{txt:t.fromData.account}},[t._v(t._s(t.fromData.account))])],1),t._v(" "),a("el-form-item",{staticClass:"clearfix",attrs:{label:t.lg.customerName}},[a("el-input",{on:{blur:function(e){return t.$trimFn("fromData","name")}},model:{value:t.fromData.name,callback:function(e){t.$set(t.fromData,"name",e)},expression:"fromData.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:t.lg.portrait+":",Xclass:"ml4",Xstyle:"width:99%;margin-left:0;position: absolute;left:39%;top:60px;"}},[a("uploadComp",{ref:"imgUploadComp",attrs:{targetUrl:"/api2/customer/portrait/upload",customerid:t.customerid,initOriginalurl:t.fromData.portrait,initThumbnailurl:t.fromData.thumbnailportrait},on:{setData:t.setDataAfterUpload}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.hideSet,expression:"!hideSet"}],staticClass:"online",attrs:{required:"",label:t.lg.roles}},[a("el-radio",{attrs:{label:1,disabled:t.fromData.customerid==this.loginId||3==t.fromData.type},model:{value:t.fromData.type,callback:function(e){t.$set(t.fromData,"type",e)},expression:"fromData.type"}},[a("i",{staticClass:"tree-icon ico-dealer"}),t._v(t._s(t.lg.gradeDealer))]),t._v(" "),a("el-radio",{directives:[{name:"show",rawName:"v-show",value:3==t.fromData.type,expression:"fromData.type == 3"}],attrs:{label:3,disabled:t.fromData.customerid==this.loginId||3==t.fromData.type},model:{value:t.fromData.type,callback:function(e){t.$set(t.fromData,"type",e)},expression:"fromData.type"}},[a("i",{staticClass:"tree-icon ico-uservirtual"}),t._v(t._s(t.lg.gradeVirtual))]),t._v(" "),a("el-radio",{attrs:{label:2,disabled:t.fromData.customerid==this.loginId||3==t.fromData.type},model:{value:t.fromData.type,callback:function(e){t.$set(t.fromData,"type",e)},expression:"fromData.type"}},[a("i",{staticClass:"tree-icon ico-user"}),t._v(t._s(t.lg.gradeUser))]),t._v(" "),a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"2"==t.fromData.type,expression:"fromData.type == '2'"}],attrs:{"true-label":1,disabled:t.fromData.customerid==this.loginId||3==t.fromData.type},model:{value:t.fromData.isread,callback:function(e){t.$set(t.fromData,"isread",e)},expression:"fromData.isread"}},[a("i",{staticClass:"tree-icon ico-userReadonly"}),t._v(t._s(t.lg.monitorOnly)+"\n            "),a("el-tooltip",{attrs:{content:t.lg.readonlyTips,placement:"top"}},[a("i",{staticClass:"el-icon-info"})])],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.hideSet,expression:"!hideSet"}],attrs:{required:"",label:t.lg.timeZone}},[a("el-select",{model:{value:t.fromData.timezone,callback:function(e){t.$set(t.fromData,"timezone",e)},expression:"fromData.timezone"}},t._l(t.timezoneArr,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"cb"})],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:t.lg.contact}},[a("el-input",{on:{blur:function(e){return t.$trimFn("fromData","contact")}},model:{value:t.fromData.contact,callback:function(e){t.$set(t.fromData,"contact",e)},expression:"fromData.contact"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"ml4",attrs:{label:t.lg.mobile}},[a("el-input",{on:{blur:function(e){return t.$trimFn("fromData","phone")}},model:{value:t.fromData.phone,callback:function(e){t.$set(t.fromData,"phone",e)},expression:"fromData.phone"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:t.lg.tel}},[a("el-input",{on:{blur:function(e){return t.$trimFn("fromData","telphone")}},model:{value:t.fromData.telphone,callback:function(e){t.$set(t.fromData,"telphone",e)},expression:"fromData.telphone"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"ml4",attrs:{required:t.customerid==t.loginId}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n            "+t._s(t.lg.email)+"\n            "),a("el-tooltip",{attrs:{content:t.lg.findPassEmailTips,placement:"top"}},[a("i",{staticClass:"el-icon-info"})])],1),t._v(" "),a("el-input",{on:{blur:function(e){return t.$trimFn("fromData","email")}},model:{value:t.fromData.email,callback:function(e){t.$set(t.fromData,"email",e)},expression:"fromData.email"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:t.lg.address}},[a("el-input",{on:{blur:function(e){return t.$trimFn("fromData","address")}},model:{value:t.fromData.address,callback:function(e){t.$set(t.fromData,"address",e)},expression:"fromData.address"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"ml4",attrs:{label:t.lg.webpage}},[a("el-input",{attrs:{maxlength:"250"},on:{blur:function(e){return t.$trimFn("fromData","webpage")}},model:{value:t.fromData.webpage,callback:function(e){t.$set(t.fromData,"webpage",e)},expression:"fromData.webpage"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!t.hideSet,expression:"!hideSet"}],staticClass:"online",attrs:{label:t.lg.createTime}},[t._v("\n          "+t._s(t.fromData.createtime>0?t.utcToLocal(t.fromData.createtime):"-")+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:10}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"tools"},[a("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.btnloading}},[t._v(t._s(t.lg.save))]),t._v(" "),t.isDialog?a("el-button",{on:{click:t.cancelFn}},[t._v(t._s(t.lg.cancel))]):t._e()],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,s,!1,function(t){a("YroZ")},null,null);e.default=l.exports},YroZ:function(t,e){},iKHV:function(t,e,a){"use strict";a.d(e,"d",function(){return r}),a.d(e,"i",function(){return n}),a.d(e,"j",function(){return o}),a.d(e,"a",function(){return i}),a.d(e,"m",function(){return s}),a.d(e,"b",function(){return l}),a.d(e,"l",function(){return m}),a.d(e,"k",function(){return c}),a.d(e,"f",function(){return u}),a.d(e,"h",function(){return f}),a.d(e,"g",function(){return d}),a.d(e,"e",function(){return p}),a.d(e,"n",function(){return h}),a.d(e,"c",function(){return v}),a.d(e,"o",function(){return D});var r=function(t){return!(!t||!/^([0-9A-Za-z\_\@\.]){2,30}$/.test(t))},n=function(t){return!!(t&&t.length<=20&&t.length>=6)},o=function(t){return"123456"!=t},i=100,s=64,l=150,m=function(t){return!!t.match(/^(\+[0-9]{1,20}|[0-9]{1,21})$/)},c=function(t){return t.indexOf("@")>0&&t.indexOf(".")>0&&!!t.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)},u=function(t){return/(^[a-zA-Z\d]{6,15}$)/.test(t)},f=function(t){return/(^[a-zA-Z\d]{5,18}$)/.test(t)},d=function(t){for(var e,a=[],r=!0,n=0,o=t.length;n<o;n++)if(e=t[n].replace(/^\s+|\s+$/gm,""),a.push(e),!u(e)){r=!1;break}return{imeis:a,rs:r}},p=function(t){return!!(/^\d+(\.5)?$/.test(t)&&parseInt(t)>=0&&parseInt(t)<=5e3)},h=function(t,e){var a={beginTime:(e=e||"")?new Date(new Date(e).getTime()).setHours(0,0,0,0):(new Date).getTime()};return a.endTime=a.beginTime+864e5*t-1,a},g=function(t,e){if(t+="",e||(e=0),-1==t.indexOf(".")&&(t+="."),t+=new Array(e+1).join("0"),new RegExp("^(-|\\+)?(\\d+(\\.\\d{0,"+(e+1)+"})?)\\d*$").test(t)){t="0"+RegExp.$2;var a=RegExp.$1,r=RegExp.$3.length,n=!0;if(r==e+2){if(r=t.match(/\d/g),parseInt(r[r.length-1])>4)for(var o=r.length-2;o>=0&&(r[o]=parseInt(r[o])+1,10==r[o]);o--)r[o]=0,n=1!=o;t=r.join("").replace(new RegExp("(\\d+)(\\d{"+e+"})\\d$"),"$1.$2")}return n&&(t=t.substr(1)),parseFloat((a+t).replace(/\.$/,""))}return t+""},v=function(t,e,a){return 0==t&&"temperature"!=e||void 0===a?t:"distance"==e?g("2"==a?.621*t:t,2):"pressure"==e?["",g(.145*t,2),g(.01*t,2),g(t,2)][a]:"capacity"==e?["",g(t,2),g(.264*t,2),g(.22*t,2)][a]:"temperature"==e?g("2"==a?1.8*t+32:t,2):"fuelefficiency"==e?["",g(t,2),g(62.1/(.264*t),2),g(62.1/(.22*t),2)][a]:t},D=function(t,e,a){return 0==t&&"temperature"!=e||void 0===a?t:"distance"==e&&1!=a?g(t/.621,2):"pressure"==e?["",g(t/.145,2),g(t/.01,2),g(t,2)][a]:"capacity"==e?["",g(t,2),g(t/.264,2),g(t/.22,2)][a]:"temperature"==e?g("2"==a?(t-32)/1.8:t,2):"fuelefficiency"==e?["",g(t,2),g(62.1/(.264*t),2),g(62.1/(.22*t),2)][a]:t}}});