webpackJsonp([97,115,117],{"9bBU":function(e,t,r){r("mClu");var i=r("FeBl").Object;e.exports=function(e,t,r){return i.defineProperty(e,t,r)}},"9xlb":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("gyMJ"),n=r("iKHV"),s={data:function(){return{imei:"",loading:!1,dialogVisible:!1,record:[]}},methods:{searchIMEI:function(){var e=this,t=this.$trim(this.imei);if(this.imei=this.$trim(this.imei),!Object(n.h)(t))return this.$message.error(lg.inputImeiLast5);this.loading=!0,Object(i._47)({imei:t}).then(function(t){e.loading=!1,e.record=t.records,t.records.length>1?e.dialogVisible=!0:1==t.records.length?e.$emit("imeiChecked",t.records[0]):e.$emit("imeiChecked",{})}).catch(function(t){e.loading=!1})},rowClick:function(e,t,r){this.$emit("imeiChecked",e),this.imei=e.imei,this.dialogVisible=!1},resetFm:function(){this.imei=""},clearFn:function(){this.record=[]}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-input",{attrs:{placeholder:e.lg.imei},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchIMEI.apply(null,arguments)}},model:{value:e.imei,callback:function(t){e.imei=t},expression:"imei"}},[r("el-button",{attrs:{slot:"append",loading:e.loading,icon:"el-icon-search"},on:{click:e.searchIMEI},slot:"append"})],1),e._v(" "),r("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"},{name:"mouseClose",rawName:"v-mouseClose"}],attrs:{title:e.lg.imei,visible:e.dialogVisible,width:"500px",closed:e.clearFn,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-table",{attrs:{data:e.record},on:{"row-click":e.rowClick}},[r("el-table-column",{attrs:{width:"35"},scopedSlots:e._u([{key:"header",fn:function(e){return[r("span")]}},{key:"default",fn:function(e){return[r("el-checkbox")]}}])}),e._v(" "),r("el-table-column",{attrs:{width:"150",property:"imei",label:e.lg.imei}}),e._v(" "),r("el-table-column",{attrs:{width:"100",property:"devicetype",label:e.lg.targetType}}),e._v(" "),r("el-table-column",{attrs:{width:"150",label:e.lg.membershipCustomer},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticStyle:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},[e._v(e._s(t.row.customername))])]}}])})],1)],1)],1)},staticRenderFns:[]},o=r("VU/8")(s,a,!1,null,null,null);t.default=o.exports},C4MV:function(e,t,r){e.exports={default:r("9bBU"),__esModule:!0}},NPiI:function(e,t){},Rpa2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("gyMJ"),n={props:["defaultUserInfo","treeType"],prop:["width"],data:function(){return{activeName:"",name:"",num:10,notFirst:!1,showTree:!1}},components:{tree:r("zAgK").default},methods:{changeFn:function(){""==this.$trim(this.name)&&(this.activeName="",this.callbackComp({customerid:"",name:""}))},querySearchAsync:function(e,t){var r=this,n=this.$trim(e);if(""==n)return t([]);Object(i.U)({query:n,num:this.num}).then(function(e){t(e.suggestions),r.$refs.userTreeInput.handleFocus()}).catch(function(e){})},handleSelect:function(e){this.activeName=e.value,this.callbackComp({customerid:e.data,name:e.value,roletype:e.roletype})},treeNodeClick:function(e){this.callbackComp({customerid:e.id,name:e.name,roletype:e.roletype}),this.name=e.name,this.hideTree(),this.activeName=e.account?(e._name?e._name:e.name)+"("+e.account+")":""},setCustomer:function(e){this.name=e},refresh:function(){this.$refs.treeComp.refresh()},toggleTree:function(){this.notFirst=!0,this.showTree=!this.showTree},hideTree:function(){this.showTree=!1},clearFn:function(){this.name="",this.activeName=""},callbackComp:function(e){this.$emit("selected",e)},focusAutoComp:function(e){document.getElementById("tips").style.display="none",this.checkPopupPosition(e)},checkPopupPosition:function(e){if(0!=document.body.scrollLeft)for(var t=document.querySelectorAll(".el-dialog__body"),r=0,i=t.length;r<i;r++)t[r].hasChildNodes(e.target)&&(document.body.scrollLeft=0)},setDefaultUserInfo:function(e){e&&(this.defaultUserInfo=e,this.treeNodeClick(this.defaultUserInfo))}},mounted:function(){var e=this;e.defaultUserInfo&&e.treeNodeClick(e.defaultUserInfo),document.body.addEventListener("click",function(t){e.hideTree()})}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-tree-select"},[r("div",{directives:[{name:"tip",rawName:"v-tip",value:e.activeName,expression:"activeName"}],attrs:{"data-tips":e.activeName}},[r("el-autocomplete",{ref:"userTreeInput",attrs:{"trigger-on-focus":!1,"fetch-suggestions":e.querySearchAsync,"popper-class":"user-autocomplete",clearable:"",placeholder:e.lg.selectHint},on:{select:e.handleSelect,focus:function(t){return e.focusAutoComp(t)},input:e.changeFn},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[r("i",{staticClass:"user-icon",class:"user-icon-"+i.roletype}),e._v(" "),r("div",{staticClass:"info"},[r("div",{staticClass:"s-name"},[e._v(e._s(i.name))]),e._v(" "),r("span",{staticClass:"s-account"},[e._v(e._s(i.account))])])]}}]),model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[r("el-button",{staticClass:"select-btn",attrs:{slot:"append",icon:e.showTree?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:function(t){return t.stopPropagation(),e.toggleTree.apply(null,arguments)}},slot:"append"})],1)],1),e._v(" "),e.notFirst?r("div",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"treeBox"},[r("tree",{ref:"treeComp",attrs:{treeType:e.treeType},on:{treeNodeClick:e.treeNodeClick}})],1):e._e()])},staticRenderFns:[]};var a=r("VU/8")(n,s,!1,function(e){r("NPiI")},null,null);t.default=a.exports},UdMx:function(e,t){},bOdI:function(e,t,r){"use strict";t.__esModule=!0;var i,n=r("C4MV"),s=(i=n)&&i.__esModule?i:{default:i};t.default=function(e,t,r){return t in e?(0,s.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},iKHV:function(e,t,r){"use strict";r.d(t,"d",function(){return i}),r.d(t,"i",function(){return n}),r.d(t,"j",function(){return s}),r.d(t,"a",function(){return a}),r.d(t,"m",function(){return o}),r.d(t,"b",function(){return c}),r.d(t,"l",function(){return l}),r.d(t,"k",function(){return u}),r.d(t,"f",function(){return d}),r.d(t,"h",function(){return m}),r.d(t,"g",function(){return h}),r.d(t,"e",function(){return f}),r.d(t,"n",function(){return p}),r.d(t,"c",function(){return v}),r.d(t,"o",function(){return y});var i=function(e){return!(!e||!/^([0-9A-Za-z\_\@\.]){2,30}$/.test(e))},n=function(e){return!!(e&&e.length<=20&&e.length>=6)},s=function(e){return"123456"!=e},a=100,o=64,c=150,l=function(e){return!!e.match(/^(\+[0-9]{1,20}|[0-9]{1,21})$/)},u=function(e){return e.indexOf("@")>0&&e.indexOf(".")>0&&!!e.match(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)},d=function(e){return/(^[a-zA-Z\d]{6,15}$)/.test(e)},m=function(e){return/(^[a-zA-Z\d]{5,18}$)/.test(e)},h=function(e){for(var t,r=[],i=!0,n=0,s=e.length;n<s;n++)if(t=e[n].replace(/^\s+|\s+$/gm,""),r.push(t),!d(t)){i=!1;break}return{imeis:r,rs:i}},f=function(e){return!!(/^\d+(\.5)?$/.test(e)&&parseInt(e)>=0&&parseInt(e)<=5e3)},p=function(e,t){var r={beginTime:(t=t||"")?new Date(new Date(t).getTime()).setHours(0,0,0,0):(new Date).getTime()};return r.endTime=r.beginTime+864e5*e-1,r},g=function(e,t){if(e+="",t||(t=0),-1==e.indexOf(".")&&(e+="."),e+=new Array(t+1).join("0"),new RegExp("^(-|\\+)?(\\d+(\\.\\d{0,"+(t+1)+"})?)\\d*$").test(e)){e="0"+RegExp.$2;var r=RegExp.$1,i=RegExp.$3.length,n=!0;if(i==t+2){if(i=e.match(/\d/g),parseInt(i[i.length-1])>4)for(var s=i.length-2;s>=0&&(i[s]=parseInt(i[s])+1,10==i[s]);s--)i[s]=0,n=1!=s;e=i.join("").replace(new RegExp("(\\d+)(\\d{"+t+"})\\d$"),"$1.$2")}return n&&(e=e.substr(1)),parseFloat((r+e).replace(/\.$/,""))}return e+""},v=function(e,t,r){return 0==e&&"temperature"!=t||void 0===r?e:"distance"==t?g("2"==r?.621*e:e,2):"pressure"==t?["",g(.145*e,2),g(.01*e,2),g(e,2)][r]:"capacity"==t?["",g(e,2),g(.264*e,2),g(.22*e,2)][r]:"temperature"==t?g("2"==r?1.8*e+32:e,2):"fuelefficiency"==t?["",g(e,2),g(62.1/(.264*e),2),g(62.1/(.22*e),2)][r]:e},y=function(e,t,r){return 0==e&&"temperature"!=t||void 0===r?e:"distance"==t&&1!=r?g(e/.621,2):"pressure"==t?["",g(e/.145,2),g(e/.01,2),g(e,2)][r]:"capacity"==t?["",g(e,2),g(e/.264,2),g(e/.22,2)][r]:"temperature"==t?g("2"==r?(e-32)/1.8:e,2):"fuelefficiency"==t?["",g(e,2),g(62.1/(.264*e),2),g(62.1/(.22*e),2)][r]:e}},k6qI:function(e,t){},mClu:function(e,t,r){var i=r("kM2E");i(i.S+i.F*!r("+E39"),"Object",{defineProperty:r("evD5").f})},pzsd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("Rpa2"),n=r("9xlb"),s=r("gyMJ"),a=r("iKHV"),o={props:["dialog"],data:function(){return{deviceid:"",formData:{customerid:"",deviceids:"",imei:"",name:"",customername:"-",simcard:"",distributortime:"",remark:""},loading:!1,isYourDevice:!0,userVisible:!1,btnloading:!1}},components:{userTreeSelect:i.default,addUser:function(){return r.e(106).then(r.bind(null,"S455")).catch()},imeiInput:n.default},methods:{setData:function(e){this.formData.imei=e.imei,this.deviceid=e.deviceid,this.getImeiData(),this.$refs.imeiInputComp.imei=e.imei},setCustomerid:function(e,t){this.formData.customerid=e;var r=this;setTimeout(function(){r.$refs.userTreeComp.setCustomer(t)},0),this.formData.distributortime=(new Date).setFullYear((new Date).getFullYear()+1)},userSelected:function(e){this.formData.customername=e.name,this.formData.customerid=e.customerid},renderData:function(e){var t=this,r=e.find(function(e,r){return e.id==t.deviceid});this.renderImeiInfo(r)},renderImeiInfo:function(e){e.id?(this.isYourDevice=!0,this.formData.deviceids=e.id,this.formData.customername=e.customername,this.formData.simcard=e.simcard,this.formData.distributortime=(new Date).setFullYear((new Date).getFullYear()+1),this.formData.name=e.name,this.formData.remark=e.distributorremark,this.formData.imei=e.imei):(this.isYourDevice=!1,this.formData.deviceids="",this.formData.customername="-",this.formData.simcard="",this.formData.distributortime="",this.formData.name="",this.formData.remark="",this.formData.imei="")},getImeiData:function(){var e=this;this.formData.imei&&(this.loading=!0,Object(s._47)({imei:this.formData.imei}).then(function(t){e.renderData(t.records),e.loading=!1}).catch(function(t){e.loading=!1}))},onSubmit:function(){var e=this,t=this.checkParams();t&&(this.btnloading=!0,Object(s._124)(t).then(function(t){e.$message.success(lg.sellTargerSuccess),e.btnloading=!1,e.resetFm(),e.$emit("sellSuccess")}).catch(function(t){e.btnloading=!1}),this.countEvent({action:"sell",opt_label:"点击",val:"Dealer2"}))},checkParams:function(){var e=this.$trim(this.formData.remark),t=this.formData.distributortime,r=this.$trim(this.formData.simcard);return this.formData.customerid?this.formData.deviceids?t?r&&!Object(a.l)(r)?(this.$message.error(lg.simcardFormatError),!1):{deviceids:this.formData.deviceids,customerid:this.formData.customerid,distributortime:t,simcard:r,remark:e}:(this.$message.error(lg.platformEndError),!1):(this.$message.error(lg.targetNull),!1):(this.$message.error(lg.selectSuperCustomerNull),!1)},showAddUser:function(){this.userVisible=!0;var e=this;this.findObj("addUserComp",this.$refs,function(){e.$refs.addUserComp.setVisible(!0),e.$refs.addUserComp.setData(e.formData.customerid,e.formData.customername)})},cbAdduser:function(e){this.formData.customername=e.customername,this.setCustomerid(e.customerid,e.customername),this.$refs.userTreeComp.refresh()},resetFm:function(){this.$refs.fromComp.resetFields(),this.formData.imei="",this.$refs.imeiInputComp.resetFm(),this.isYourDevice=!0},cancel:function(){this.resetFm(),this.$emit("close")}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"fromComp",staticClass:"sell-form",attrs:{"show-message":!1,"label-position":"right",model:e.formData,"label-width":"130px"},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{staticClass:"field-customer",attrs:{label:e.lg.aimCustomer,required:""}},[r("div",{staticClass:"pr",staticStyle:{"max-width":"220px"}},[r("userTreeSelect",{ref:"userTreeComp",on:{selected:e.userSelected}}),e._v(" "),r("div",{staticClass:"adduser"},[r("em",[r("el-button",{staticClass:"add-new",attrs:{icon:"add-user-icon base-icon"},on:{click:e.showAddUser}},[e._v(e._s(e.lg.add))])],1),e._v(" "),r("addUser",{ref:"addUserComp",on:{cbAddUser:e.cbAdduser}})],1)],1)])],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.lg.imei,required:""}},[r("imeiInput",{ref:"imeiInputComp",on:{imeiChecked:e.renderImeiInfo}}),e._v(" "),e.isYourDevice?e._e():r("span",{staticClass:"el-form-item__error"},[e._v(e._s(e.lg[20010]))])],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.lg.targetName,required:"",prop:"name"}},[r("el-input",{on:{blur:function(t){return e.$trimFn("formData","name")}},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.lg.belongTo,prop:"customername"}},[r("div",{directives:[{name:"tip",rawName:"v-tip",value:e.formData.customername,expression:"formData.customername"}],staticClass:"txt-ellipsis",attrs:{"data-tips":e.formData.customername}},[e._v(e._s(e.formData.customername))])])],1)],1),e._v(" "),r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.lg.simCard,prop:"simcard"}},[r("el-input",{attrs:{clearable:""},on:{blur:function(t){return e.$trimFn("formData","simcard")}},model:{value:e.formData.simcard,callback:function(t){e.$set(e.formData,"simcard",t)},expression:"formData.simcard"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.lg.userEnd,required:"",prop:"distributortime"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"timestamp"},model:{value:e.formData.distributortime,callback:function(t){e.$set(e.formData,"distributortime",t)},expression:"formData.distributortime"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.lg.remark,prop:"remark"}},[r("el-input",{attrs:{type:"textarea",clearable:""},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary","native-type":"submit",loading:e.btnloading}},[e._v(e._s(e.lg.submit))]),e._v(" "),e.dialog?r("el-button",{on:{click:e.cancel}},[e._v(e._s(e.lg.cancel))]):r("el-button",{on:{click:e.resetFm}},[e._v(e._s(e.lg.reset))])],1)],1)},staticRenderFns:[]};var l=r("VU/8")(o,c,!1,function(e){r("k6qI")},null,null);t.default=l.exports},zAgK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("bOdI"),n=r.n(i),s=r("gyMJ"),a=r("KvKp"),o={props:["treeType","showCheckbox","rightClickFlag"],data:function(){return{treetype:"1",orderKey:"name",orderType:"asc",firstNode:null,firstResolve:null,deviceid:"",rightDisplay:!1,rightClickStatus:!1,hideRightTime:null,hoverRightTime:null,treeShow:!0,curUserId:"",optionleft:-1e4,optiontop:-1e4,defaultExpand:[],clickNum:0,dbClickTimeObj:null,defaultProps:{label:"name",children:[],isLeaf:"leaf"},refreshFlag:!1,loading:!1}},computed:{loginId:function(){return this.$store.state.customerInfo.id},firstData:function(){return this.$store.state.tree.first},childData:function(){return this.$store.state.tree.child}},components:{treeRight:function(){return r.e(132).then(r.bind(null,"XeIX"))}},methods:{reloadTree:function(e){this.treetype!=e&&(this.refreshFlag=!0,this.treetype=e||"1",this.loadNode(this.firstNode,this.firstResolve))},reloadTreeParent:function(){if(this.orderKey=Object(a.c)("treeCustomerOrderBy")||"name",this.orderType=Object(a.c)("treeCustomerOrderType")||"asc",this.curUserId){this.refreshFlag=!0;var e=this.$refs.tree.getNode(this.curUserId);e.parent.loaded=!1,e.parent.expand()}},refresh:function(){if(this.curUserId){this.refreshFlag=!0;var e=this.$refs.tree.getNode(this.curUserId);this.getSelfData(e),e.loaded=!1,e.expand()}},refreshNode:function(e,t){this.refreshFlag=!0,this.getSelfData(t),t.loaded=!1,t.expand(),e.stopPropagation()},refreshSelf:function(){if(this.curUserId){var e=this.$refs.tree.getNode(this.curUserId);this.getSelfData(e)}},loadNode:function(e,t){0===e.level?(this.firstNode=e,this.firstResolve=t,this.firstNode.childNodes=[],this.getFirstData(t)):e.level>=1&&this.getChildData(e,t)},getSelfData:function(e){var t=this;Object(s._155)({customerid:e.data.id,treetype:this.treetype}).then(function(r){var i=r.record;e.data.name=("account"==t.orderKey?i.account:i.name)+"("+i.ownnum+"/"+i.totalnum+")",e.data.account=i.account,e.data.role=i.role,e.data.roletype=i.roletype,e.data.type=i.type,e.data.isread=i.isread,e.data._name=i._name}).catch(function(e){})},getFirstData:function(e){var t=this,r=1==this.treetype;this.firstData&&r?this.renderFirst(e,this.firstData):(this.loading=!0,this.$store.dispatch("getTreeFirst",{param:{customerid:this.loginId,treetype:this.treetype},save:r}).then(function(r){t.renderFirst(e,r.record),t.loading=!1,t.$emit("treeLoaded")}).catch(function(e){t.loading=!1}))},renderFirst:function(e,t){var r;e([(r={id:t.customerid,name:t.name+"("+t.ownnum+"/"+t.totalnum+")",_name:t.name,account:t.account,leaf:!t.hadchild,type:t.type,role:t.role,roletype:t.roletype},n()(r,"_name",t.name),n()(r,"isread",t.isread),r)]),t.hadchild&&!this.inArray(this.defaultExpand,t.customerid)&&this.defaultExpand.push(t.customerid);var i=this;setTimeout(function(){i.$refs.tree.setCurrentKey(t.customerid)},0)},getChildData:function(e,t){var r=this,i=1==e.level&&1==this.treetype;this.childData&&i&&!this.refreshFlag?this.renderChild(e,t,this.childData):this.$store.dispatch("getTreeChild",{param:{customerid:e.data.id,puretree:1,treetype:this.treetype},save:i}).then(function(i){if(r.refreshFlag=!1,!i.record)return t([]);r.renderChild(e,t,i.record)}).catch(function(e){r.refreshFlag=!1})},renderChild:function(e,t,r){for(var i=[],n=0,s=(r=this.treeSortor(r)).length;n<s;n++)i.push({id:r[n].id,name:("account"==this.orderKey?r[n].account:r[n].name)+"("+r[n].ownnum+"/"+r[n].totalnum+")",account:r[n].account,leaf:!r[n].hadchild,type:r[n].type,role:r[n].role,roletype:r[n].roletype,_name:r[n].name,isread:r[n].isread});t(i)},treeSortor:function(e){var t,r=this;switch(r.orderKey){case"name":case"account":return e.sort(function(e,i){return t=e[r.orderKey].localeCompare(i[r.orderKey]),"asc"==r.orderType?t:-t});case"id":case"ownnum":case"totalnum":return e.sort(function(e,i){return t=e[r.orderKey]-i[r.orderKey],"asc"==r.orderType?t:-t});default:return e}},renderContent:function(e,t){var r=this,i=t.node,n=t.data,s=(t.store,void 0),a="",o=n._name+"("+n.account+")";return"1"==n.role?s=e("div",{class:"custom-tree-node fl",directives:[{name:"tip",value:["<div style=\"padding-left:20px;background-image:url('/dealer/images/vip.png');background-repeat:no-repeat;background-position:-6px -2px;\">"+lg.superAdmin+"</div>","<div>"+o+"</div>"].join("\n")}]},[e("div",{class:"custom-tree-node-cont"},[e("i",{class:"tree-icon "+(n.leaf?"userIcon"+n.type:"userIconArr"+n.type)}),e("span",{class:"tree-node-word "+("1"==n.role?"red":"")},[n.name]),this.rightClickFlag?e("span",{class:"el-icon-more-v",on:{click:function(e){return r.clickShowMore(e,n)}}}):e("span",{class:"tree-refresh el-icon-refresh",on:{click:function(e){return r.refreshNode(e,i)}}})])]):(a=n.leaf?"userIcon"+n.type:"userIconArr"+n.type,1==n.isread&&(1==n.type&&(a="dealerIconReadonly"),2==n.type&&(a="userIconReadonly")),s=e("div",{class:"custom-tree-node fl",directives:[{name:"tip",value:o}]},[e("div",{class:"custom-tree-node-cont"},[e("i",{class:"tree-icon "+a}),e("span",{class:"tree-node-word"},[n.name]),this.rightClickFlag?e("span",{class:"el-icon-more-v",on:{click:function(e){return r.clickShowMore(e,n)},mouseover:function(e){return r.hoverShowMore(e,n)},mouseout:function(e){return r.hoverHideMore(e,n)}}}):e("span",{class:"tree-refresh el-icon-refresh",on:{click:function(e){return r.refreshNode(e,i)}}})])])),s},clickShowMore:function(e,t){this.rightClickStatus=!0,this.showRightClick(e,t),e.stopPropagation()},hoverShowMore:function(e,t){if(clearTimeout(this.hideRightTime),!this.rightClickStatus){var r=this;this.hoverRightTime=setTimeout(function(){r.showRightClick(e,t)},300),e.stopPropagation()}},hoverHideMore:function(){clearTimeout(this.hoverRightTime);var e=this;this.hideRightTime=setTimeout(function(){e.hideRightOption()},500)},hideRightOption:function(){this.rightDisplay=!1,document.body.onclick=null,this.rightClickStatus=!1},rightOptionHover:function(){clearTimeout(this.hideRightTime)},rightOptionHoverOut:function(){var e=this;this.hideRightTime=setTimeout(function(){e.hideRightOption()},500)},rightClick:function(e,t){this.rightClickStatus=!0,this.showRightClick(e,t)},showRightClick:function(e,t){if(this.rightClickFlag){this.rightDisplay=!0;var r=this;setTimeout(function(){var i=r.$refs.treeRightComp.$el.offsetHeight,n=document.documentElement.clientHeight;r.optiontop=e.clientY+i>n?e.clientY-i:e.clientY,r.optionleft=e.clientX+15,r.$refs.treeRightComp.setData(t)},0),this.curUserId=t.id,document.body.onclick=function(){r.hideRightOption()}}},handleCheckChange:function(e,t,r){var i=this.$refs.tree.getCheckedNodes(),n=this.$refs.tree.getCheckedKeys();this.$emit("checkChange",{obj:i,key:n})},setCheckedKeys:function(e){this.$refs.tree.setCheckedKeys(e)},nodeClick:function(e,t,r){for(var i=t,n=[e.id];i&&i.parent&&i.parent.data;)n.push(i.parent.data.id),i=i.parent;this.$emit("treeNodeClick",e,n),this.curUserId=e.id,this.rightDisplay=!1,this.dbClick(window.event,e,t,r)},dbClick:function(e,t,r,i){if(e){this.clickNum++,2==this.clickNum&&(this.rightClickStatus=!0,this.showRightClick(e,t,r,i));var n=this;clearTimeout(this.dbClickTimeObj),this.dbClickTimeObj=setTimeout(function(){n.clickNum=0},500)}},selectTreeNode:function(e,t){var r="string"==typeof e.customers?e.customers.split(",").reverse().map(Number):e.customers,i=r.pop();this.defaultExpand=r;var n=this;!function e(){var r=n.$refs.tree.getNode(i);if(r&&!n.loading){if(n.$refs.tree.setCurrentKey(r.key),n.nodeClick(r.data,r),t){var s=n.$refs.tree.getCheckedKeys()||[];s.push(r.key),n.$refs.tree.setCheckedKeys(s)}}else setTimeout(function(){e()},200)}()},getCurrentNode:function(){return this.$refs.tree.getCurrentNode()},nodeExpandFn:function(e,t){this.defaultExpand.push(e.id),this.$emit("expanded")},nodeCollapseFn:function(e){this.defaultExpand.splice(this.defaultExpand.indexOf(e.id),1),this.$emit("collapse")}},mounted:function(){this.curUserId=this.loginId},created:function(){this.treetype=this.treeType?this.treeType:"1",this.orderKey=Object(a.c)("treeCustomerOrderBy")||"name",this.orderType=Object(a.c)("treeCustomerOrderType")||"asc"}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"tree-comp"},[r("el-tree",{directives:[{name:"show",rawName:"v-show",value:e.treeShow,expression:"treeShow"}],ref:"tree",attrs:{lazy:"",load:e.loadNode,props:e.defaultProps,"node-key":"id","default-expanded-keys":e.defaultExpand,"empty-text":e.lg.noData,accordion:!0,"expand-on-click-node":!1,"highlight-current":!0,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,"check-strictly":!0,"check-on-click-node":!0},on:{"node-click":e.nodeClick,"node-contextmenu":e.rightClick,"check-change":e.handleCheckChange,"node-expand":e.nodeExpandFn,"node-collapse":e.nodeCollapseFn}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.rightDisplay,expression:"rightDisplay"}],staticClass:"tree-right-option",style:{left:e.optionleft+"px",top:e.optiontop+"px"}},[r("treeRight",{ref:"treeRightComp",on:{reloadTreeParent:e.reloadTreeParent,refresh:e.refresh,refreshSelf:e.refreshSelf,mouseEnterEv:e.rightOptionHover,mouseLeaveEv:e.rightOptionHoverOut}})],1)],1)},staticRenderFns:[]};var l=r("VU/8")(o,c,!1,function(e){r("UdMx")},null,null);t.default=l.exports}});