webpackJsonp([2],{"4HuX":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{loading:!1,activeMenu:"membership",record:{}}},computed:{auth:function(){return this.$store.state.auth},pageArr:function(){var e=[{label:lg.membershipCustomer,name:"membership",router:"../../components/membershipTable",fn:"showMembership"},{label:lg.detail,name:"detail",router:"detail",fn:"showDetail"},{label:lg.quickSale,name:"sale",router:"sell",fn:"showSale"},{label:lg.move,name:"move",router:"batchMove",fn:"showMove"},{label:lg.recharge,name:"recharge",router:"recharge",fn:"showRecharge"},{label:lg.command,name:"command",router:"command",fn:"showCommand"},{label:lg.ioSet,name:"ioSet",router:"io",fn:"showIO"}];return this.record.hasrecord&&e.push({label:lg.recording,name:"recording",router:"recording",fn:"showRecording"}),e.push({label:lg.addAccount,name:"addAccount",router:"createAccount",fn:"showAddAccount"}),e.push({label:lg.modifyPwd,name:"modifyPassword",router:"modifyPasswordComp",fn:"showModifyPwd"}),this.owner&&e.push({label:lg.gradeVirtual,name:"virtualCustomer",router:"virtualCustomerList",fn:"showViltureList"}),this.auth.hasViewDescription&&e.push({label:lg.more,name:"moreActions",router:"moreActions",fn:"showMoreAction"}),e},comp:function(){var e=this,t=this.pageArr.find(function(t){return t.name===e.activeMenu});if("membership"==this.activeMenu)return this.loading=!0,function(t){return i.e(129).then(function(){var a=[i("SDaM")];(function(i){e.loading=!1,t(i)}).apply(null,a)}).catch(i.oe)};var a=t.router;return a?(this.loading=!0,function(t){return i.e(92).then(function(){var s=[i("7ESL")("./"+a+".vue")];(function(i){e.loading=!1,t(i)}).apply(null,s)}).catch(i.oe)}):void 0},owner:function(){return this.$store.state.auth&&this.$store.state.auth.viewdevicevirtualower}},methods:{showMembership:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData(e.deepCopy(e.record.relationship,"arr"))})},showDetail:function(){var e=this;this.findObj("getDetail",this.$refs.comP,function(){e.$refs.comP.getDetail(e.record.id)})},showSale:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData({imei:e.record.imei,deviceid:e.record.id})})},showMove:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData([e.record.imei])})},showRecharge:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData({imei:e.record.imei,deviceid:e.record.id,devicename:e.record.name,plattime:e.record.plattime})})},showCommand:function(){var e=this;this.findObj("showCommand",this.$refs.comP,function(){e.$refs.comP.showCommand(e.record.id,e.record.name)})},showAddAccount:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData({imei:e.record.imei,deviceid:e.record.id,devicename:e.record.name})})},showModifyPwd:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData({deviceid:e.record.id,devicename:e.record.name})})},showIO:function(){var e=this;this.findObj("init",this.$refs.comP,function(){e.$refs.comP.init(e.record.id)})},showRecording:function(){var e=this;this.findObj("showRecording",this.$refs.comP,function(){e.$refs.comP.showRecording(e.record.id,e.record.name)})},showViltureList:function(){var e=this;this.findObj("showList",this.$refs.comP,function(){e.$refs.comP.showList(e.record.id,e.record.name)})},showMoreAction:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData({imei:e.record.imei,deviceid:e.record.id})})},clickTab:function(){var e=this,t=this.pageArr.find(function(t){return t.name===e.activeMenu}),i=this;setTimeout(function(){i.findObj("comP",i.$refs,function(){i[t.fn]()})},0)},setData:function(e,t){var i=this;this.record=e,this.activeMenu=t||"membership";var a=this.pageArr.find(function(e){return e.name==i.activeMenu}),s=this;setTimeout(function(){s.findObj("comP",s.$refs,function(){s[a.fn]()})},0)},reset:function(){this.activeMenu="membership",this.record={}}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-device-detail clearfix"},[i("div",{staticClass:"detail-nav fl"},[i("el-tabs",{staticClass:"search-detail-tab",attrs:{"tab-position":"left"},on:{"tab-click":e.clickTab},model:{value:e.activeMenu,callback:function(t){e.activeMenu=t},expression:"activeMenu"}},e._l(e.pageArr,function(t){return i("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}},[i("span",{attrs:{slot:"label",title:t.label},slot:"label"},[e._v(e._s(t.label))])])}),1)],1),e._v(" "),i("div",{staticClass:"detail-right fr"},[i("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"h100b hidden-scroll-x"},[i(e.comp,{ref:"comP",tag:"component"})],1)],1)])},staticRenderFns:[]};var r=i("VU/8")(a,s,!1,function(e){i("9o/j")},null,null);t.default=r.exports},"9o/j":function(e,t){},Ghwc:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),r=i("jWLf"),n=i("r2W4"),o=i("gyMJ"),c={data:function(){return{dialogVisible:!1,key:"",searchKey:"",searchVal:[],matchMore:!1,activeName:"device"}},components:{deviceComp:r.default,userComp:n.default},computed:{loginId:function(){return this.$store.state.customerInfo.id},auth:function(){return this.$store.state.auth}},methods:{setVisible:function(e){this.dialogVisible=e},querySearch:function(e,t){var i=[],a=this.$trim(e),s={key:a};if(this.matchMore&&(s.type=1),this.searchKey==a)return t(this.searchVal);if(this.searchKey=a,""==a||a.length<2){var r=this.getStorageData();i=this.packResult(r),this.searchVal=i,t(i)}else"device"==this.activeName?this.searchDeviceList(s,t):"user"==this.activeName?this.searchCustomerList(s,t):(this.searchVal=[],t([]))},packResult:function(e){var t=[];return e.forEach(function(e){t.push({value:e})}),t},searchDeviceList:function(e,t){var i=this,a=[];Object(o._123)(e).then(function(e){e.records.forEach(function(e){a.push({value:e.name})}),i.searchVal=a,t(a)}).catch(function(){})},searchCustomerList:function(e,t){var i=this,a=[];Object(o._122)(e).then(function(e){e.records.forEach(function(e){a.push({value:e.name})}),i.searchVal=a,t(a)}).catch(function(){})},createStateFilter:function(e){return function(t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.searchData()},clearInput:function(){},setData:function(e,t){this.activeName=e,this.key=this.$trim(t);var i=this;setTimeout(function(){i.searchData()},0)},checkSearch:function(){return!(this.key.length<2)||(this.key>0&&this.$message.error(lg.inputLen2),!1)},searchData:function(){this.checkSearch()&&(this.key=this.$trim(this.key).toLowerCase(),"device"==this.activeName?(this.$refs.deviceComp.getData(this.key,this.matchMore),this.countEvent({action:"搜索设备",opt_label:"点击",val:"Dealer2"})):(this.$refs.userComp.getData(this.key,this.matchMore),this.countEvent({action:"搜索客户",opt_label:"点击",val:"Dealer2"})),this.setStorageKey())},getStorageData:function(){var e=localStorage.getItem("searchKey");return e&&-1!=e.indexOf("{")&&(e=JSON.parse(e))[this.loginId]?e[this.loginId].split(","):[]},setStorageKey:function(){for(var e=localStorage.getItem("searchKey"),t=(e=e&&"-1"!=e.indexOf("{")?JSON.parse(e):{})[this.loginId]?e[this.loginId].split(","):[],i=!1,a=0,r=t.length;a<r;a++)t[a].toLowerCase()==this.key.toLowerCase()&&(i=!0);i||(t.length>=10&&t.pop(),0==t.length?t=[this.key]:t.unshift(this.key),e[this.loginId]=t.join(","),localStorage.setItem("searchKey",s()(e)))},showDeviceDetail:function(e){this.activeName="device",this.key=this.$trim(e);var t=this;setTimeout(function(){t.$refs.deviceComp.getData(t.key,t.matchMore,"detail")},0)},showUserDetail:function(e){this.activeName="user",this.key=this.$trim(e);var t=this;setTimeout(function(){t.$refs.userComp.getData(t.key,t.matchMore,"detail")},0)},tabClick:function(e){this.activeName!=e&&(this.activeName=e,this.checkSearch()&&("device"==this.activeName?(this.$refs.deviceComp.getData(this.key,this.matchMore),this.$refs.userComp&&this.$refs.userComp.clearFn()):(this.$refs.userComp.getData(this.key,this.matchMore),this.$refs.deviceComp&&this.$refs.deviceComp.clearFn())))},dialogCloseFn:function(){this.$refs.deviceComp.clearFn(),this.$refs.userComp.clearFn()}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"},{name:"mouseClose",rawName:"v-mouseClose"}],staticClass:"search-dialog",attrs:{visible:e.dialogVisible,modal:!0,"show-close":!0,width:"900px",top:"8vh","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.dialogCloseFn}},[i("div",{attrs:{slot:"title"},slot:"title"},[e._v("\n    "+e._s(e.lg.search)+"\n    "),i("ul",{staticClass:"search-nav clearfix"},[i("li",{class:{"active-nav":"device"==e.activeName},on:{click:function(t){return t.stopPropagation(),e.tabClick("device")}}},[e._v(e._s(e.lg.target)),i("i",{directives:[{name:"show",rawName:"v-show",value:"device"==e.activeName,expression:"activeName=='device'"}],staticClass:"el-icon-caret-top"})]),e._v(" "),i("li",{class:{"active-nav":"user"==e.activeName},on:{click:function(t){return t.stopPropagation(),e.tabClick("user")}}},[e._v(e._s(e.lg.customer)),i("i",{directives:[{name:"show",rawName:"v-show",value:"user"==e.activeName,expression:"activeName=='user'"}],staticClass:"el-icon-caret-top"})])])]),e._v(" "),i("div",{staticClass:"search-input mt15"},[i("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearch,clearable:"","prefix-icon":"search-icon base-icon","popper-class":"h-search-popper"},on:{select:e.handleSelect},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchData.apply(null,arguments)}},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchData},slot:"append"})],1),e._v(" "),e.auth.hasSearchEngine?i("el-checkbox",{staticClass:"chk-matchmore",on:{change:e.searchData},model:{value:e.matchMore,callback:function(t){e.matchMore=t},expression:"matchMore"}},[e._v(e._s(e.lg.matchMore))]):e._e()],1),e._v(" "),i("deviceComp",{directives:[{name:"show",rawName:"v-show",value:"device"==e.activeName,expression:"(activeName=='device')"}],ref:"deviceComp"}),e._v(" "),i("userComp",{directives:[{name:"show",rawName:"v-show",value:"user"==e.activeName,expression:"(activeName=='user')"}],ref:"userComp"})],1)},staticRenderFns:[]};var h=i("VU/8")(c,l,!1,function(e){i("an+2")},null,null);t.default=h.exports},L9W2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{showAddCustomerDialog:!1,showAddDeviceDialog:!1,userType:["",lg.gradeDealer,lg.gradeUser,lg.gradeVirtual],activeMenu:"membership",record:{}}},components:{},computed:{auth:function(){return this.$store.state.auth},pageArr:function(){var e=[];return e=3==this.record.type?[{label:lg.membershipCustomer,name:"membership",router:"components/membershipTable",fn:"showMembership"},{label:lg.detail,name:"detail",router:"view/user/view",fn:"showDetail"},{label:lg.customerMove,name:"move",router:"view/user/move",fn:"showMove"},{label:lg.addCustomer,name:"adduser",router:"view/user/addComp",fn:"showAddCustomer"},{label:lg.addTarget,name:"addDevice",router:"view/device/addVirtualDevice",fn:"showAddVDevice"}]:[{label:lg.membershipCustomer,name:"membership",router:"components/membershipTable",fn:"showMembership"},{label:lg.detail,name:"detail",router:"view/user/view",fn:"showDetail"},{label:lg.sale,name:"sell",router:"view/device/sell",fn:"showSale"},{label:lg.addCustomer,name:"adduser",router:"view/user/addComp",fn:"showAddCustomer"},{label:lg.customerMove,name:"move",router:"view/user/move",fn:"showMove"},{label:lg.addTarget,name:"addDevice",router:"view/device/addComp",fn:"showAddDevice"},{label:lg.moveTarget,name:"moveTarget",router:"view/device/batchMove",fn:"showMoveDevice"}],this.auth.hasViewDescription&&e.push({label:lg.more,name:"moreActions",router:"view/user/moreActions",fn:"showMoreAction"}),e},comp:function(){var e=this,t=this.pageArr.find(function(t){return t.name===e.activeMenu}).router;if(t)return function(e){return i.e(91).then(function(){var a=[i("/EbY")("./"+t+".vue")];e.apply(null,a)}.bind(this)).catch(i.oe)}}},methods:{showMembership:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData(e.deepCopy(e.record.relationship,"arr"))})},showDetail:function(){var e=this;this.findObj("getInfo",this.$refs.comP,function(){e.$refs.comP.getInfo(e.record.id)})},showSale:function(){var e=this;this.findObj("setCustomerid",this.$refs.comP,function(){e.$refs.comP.setCustomerid(e.record.id,e.record.name)})},showMove:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData(e.record)})},showAddCustomer:function(){var e=this;this.findObj("setCustomerid",this.$refs.comP,function(){e.$refs.comP.setCustomerid(e.record.id,e.record.name)})},showMoveDevice:function(){var e=this;this.findObj("setCustomer",this.$refs.comP,function(){e.$refs.comP.setCustomer(e.record.id,e.record.name)})},showAddDevice:function(){var e=this;this.findObj("init",this.$refs.comP,function(){e.$refs.comP.init(e.record.id,e.record.name)})},showAddVDevice:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData({account:e.record.account,id:e.record.id,_name:e.record.name})})},resetPassword:function(){var e=this;this.findObj("resetPwdComp",this.$refs,function(){e.$refs.resetPwdComp.resetPassword(e.record.id)})},showMoreAction:function(){var e=this;this.findObj("setData",this.$refs.comP,function(){e.$refs.comP.setData({account:e.record.account,customerid:e.record.id,name:e.record.name})})},clickTab:function(){var e=this,t=this.pageArr.find(function(t){return t.name===e.activeMenu}),i=this;setTimeout(function(){i.findObj("comP",i.$refs,function(){i[t.fn]()})},0)},setData:function(e,t){var i=this;this.record=e,this.activeMenu=t||"membership";var a=this.pageArr.find(function(e){return e.name==i.activeMenu}),s=this;setTimeout(function(){s.findObj("comP",s.$refs,function(){s[a.fn]()})},0)},reset:function(){this.record={},this.activeMenu="membership"}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-user-detail clearfix"},[i("div",{staticClass:"detail-nav fl"},[i("el-tabs",{staticClass:"search-detail-tab",attrs:{"tab-position":"left"},on:{"tab-click":e.clickTab},model:{value:e.activeMenu,callback:function(t){e.activeMenu=t},expression:"activeMenu"}},e._l(e.pageArr,function(e){return i("el-tab-pane",{key:e.name,attrs:{label:e.label,name:e.name}})}),1)],1),e._v(" "),i("div",{staticClass:"detail-right fr"},[i("el-scrollbar",{staticClass:"h100b hidden-scroll-x"},[i(e.comp,{ref:"comP",tag:"component"})],1)],1)])},staticRenderFns:[]};var r=i("VU/8")(a,s,!1,function(e){i("ybOy")},null,null);t.default=r.exports},ScAU:function(e,t){},Webc:function(e,t){},"an+2":function(e,t){},jWLf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("gyMJ"),s=(i("iKHV"),{data:function(){return{records:[],curData:{},key:"",matchMore:!1,parsedWords:[],loading:!1,showDetail:!1}},computed:{owner:function(){return this.$store.state.functions&&this.$store.state.functions.accountimeiowner}},components:{detailComp:i("4HuX").default,ownerComp:function(){return i.e(80).then(i.bind(null,"XIE1")).catch()}},methods:{indexMethod:function(e){return e+1},getData:function(e,t,i){var s=this,r={key:e};this.showDetail=!1,e?(t&&(r.type=1),this.key=e,this.matchMore=t,this.loading=!0,this.records=[],Object(a._123)(r).then(function(e){if(s.records=e.records,s.loading=!1,s.canShowDetail()){var t=s;setTimeout(function(){t.showDetailFn(t.records[0],i)},200)}}).catch(function(){s.loading=!1}),this.parsedWords=this.parseWords(this.key)):this.record=[]},canShowDetail:function(){if(1==this.records.length){var e=this.records[0],t=this.$trim(e.name).toLocaleUpperCase()==this.$trim(this.key).toLocaleUpperCase(),i=this.$trim(e.imei).toLocaleUpperCase()==this.$trim(this.key).toLocaleUpperCase(),a=this.$trim(e.simcard).toLocaleUpperCase()==this.$trim(this.key).toLocaleUpperCase(),s=this.$trim(e.carnum).toLocaleUpperCase()==this.$trim(this.key).toLocaleUpperCase();return!!(t||i||a||s)}return!1},rowClick:function(e,t){this.showDetailFn(e)},showDetailFn:function(e,t){this.curData=e,this.showDetail=!0,this.$refs.detailComp.setData(e,t)},showOwner:function(){this.$refs.ownerComp.getInfo("imei",this.key)},resetPwd:function(e){var t=this;this.$confirm(lg.resetPwdTip).then(function(){Object(a._119)({deviceid:t.record.id}).then(function(e){t.$message.success(lg.resetPwdSuceess)}).catch(function(){})}).catch(function(){})},fmtRowDetail:function(e){var t="";return this.matchMore&&(t=[lg.targetName+": "+this.fmtHighlight(e.name),lg.imei+": "+this.fmtHighlight(e.imei),lg.simCard+": "+this.fmtHighlight(e.simcard),lg.targetType+": "+e.devicetype,lg.carNum+": "+this.fmtHighlight(e.carnum)].join("<br>")),t},parseWords:function(e){for(var t=[],i=e.split(","),a=0;a<i.length;a++)for(var s=i[a].split(""),r=0;r<s.length;r++)for(var n=r;n<s.length;n++){for(var o="",c=r;c<=n;c++)o+=s[c]+"";var l=o;l.length>=2&&t.push(l)}return t.sort(function(e,t){return t.length-e.length}),t},fmtHighlightWholeWord:function(e){var t=this.$trim(e).toLocaleUpperCase().indexOf(this.$trim(this.key).toLocaleUpperCase()),i=this.key.length,a=e.length;return-1==t?e||"-":e.substr(0,t)+'<span style="color:red;">'+e.substr(t,i)+"</span>"+e.substr(t+i,a)},fmtHighlight:function(e){if(!e)return"-";if(!this.matchMore)return this.fmtHighlightWholeWord(e);for(var t=this.parsedWords,i=void 0,a=0;a<t.length;a++)i=new RegExp(this.escapeRegExp(t[a]),"ig"),"em"!=t[a]&&(e=e.replace(i,"<em>"+t[a].toLocaleString()+"</em>"));return e},escapeRegExp:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},clearFn:function(){this.records=[],this.key="",this.showDetail=!1,this.$refs.detailComp&&this.$refs.detailComp.reset()}}}),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-cont search-device-list clearfix"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-list-box"},[i("div",{staticClass:"result-box",domProps:{innerHTML:e._s(e.lg.searchTip.replace("{num}",e.records.length))}}),e._v(" "),i("el-table",{staticClass:"table-list",staticStyle:{width:"100%"},attrs:{data:e.records,"highlight-current-row":"",stripe:""},on:{"row-click":e.rowClick}},[i("el-table-column",{attrs:{type:"index",align:"center",index:e.indexMethod,label:e.lg.serialNum,width:"48"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:e.lg.targetName},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{innerHTML:e._s(e.fmtHighlight(t.row.name))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"imei",label:e.lg.imei},scopedSlots:e._u([{key:"default",fn:function(t){return[i("copy",{attrs:{txt:t.row.imei}},[i("span",{domProps:{innerHTML:e._s(e.fmtHighlight(t.row.imei))}})])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"simcard",label:e.lg.simCard},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.simcard?[i("copy",{attrs:{txt:t.row.simcard}},[i("span",{domProps:{innerHTML:e._s(e.fmtHighlight(t.row.simcard))}})])]:[e._v("\n            -\n          ")]]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"devicetype",label:e.lg.targetType},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{domProps:{innerHTML:e._s(e.fmtHighlight(t.row.devicetype))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.lg.membershipCustomer},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{staticClass:"link-btn"},[e._v(e._s(t.row.relationship?t.row.relationship[0].name:"-"))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.lg.operate},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{directives:[{name:"tip",rawName:"v-tip",value:{txt:e.fmtRowDetail(t.row),align:"centerBottom"},expression:"{txt:fmtRowDetail(scope.row),align:'centerBottom'}"}],staticClass:"link-btn",on:{click:function(i){return i.stopPropagation(),e.showDetailFn(t.row,"detail")}}},[e._v(e._s(e.lg.detail))]),e._v(" |\n          "),i("a",{staticClass:"link-btn",attrs:{href:"/V2/index.jsp?customerid="+t.row.customerid+"&source=V2/#/playback?deviceid="+t.row.id,target:"_blank"}},[e._v(e._s(e.lg.playback))])]}}])}),e._v(" "),i("div",{attrs:{slot:"empty"},slot:"empty"},[i("div",{staticClass:"mb10"},[e._v(e._s(e.lg.noData)+" ")]),e._v(" "),0==e.records.length&&e.owner&&e.key?i("el-popover",{attrs:{placement:"right",target:"click",width:"550"}},[i("ownerComp",{ref:"ownerComp"}),e._v(" "),i("a",{staticClass:"link",attrs:{slot:"reference"},on:{click:e.showOwner},slot:"reference"},[e._v("\n              "+e._s(e.lg.accountImeiOwner)),i("i",{staticClass:"el-icon-d-arrow-right",staticStyle:{"font-size":"11px"}})])],1):e._e()],1)],1)],1),e._v(" "),i("div",{staticClass:"search-detail",style:"top:"+(e.showDetail?0:700)+"px"},[i("div",{staticClass:"back-nav clearfix"},[i("div",{staticClass:"back-nav-box fl"},[i("span",{staticClass:"back-btn",on:{click:function(t){e.showDetail=!1}}},[i("i",{staticClass:"back-icon base-icon"}),e._v(" "+e._s(e.lg.back))]),e._v(" |\n        "),i("span",{staticClass:"ml5"},[i("span",{attrs:{title:e.lg.targetName}},[e._v(e._s(e.curData.name))]),e._v("\n        ( "),i("copy",{ref:"copy-search-imei",attrs:{txt:e.curData.imei}},[i("span",{attrs:{title:e.lg.carNum}},[e._v(e._s(e.curData.carnum?e.curData.carnum:""))]),e._v(" "),i("span",{attrs:{title:e.lg.imei}},[e._v(e._s(e.curData.imei))])]),e._v(" )\n        ")],1)]),e._v(" "),i("div",{staticClass:"fr"},[i("a",{staticClass:"device-detail-opt-btn playback-icon",attrs:{href:"/V2/index.jsp?customerid="+e.curData.customerid+"&source=V2/#/playback?deviceid="+e.curData.id,target:"_blank"}},[e._v(e._s(e.lg.playback))]),e._v(" "),i("a",{staticClass:"device-detail-opt-btn track-icon",attrs:{href:"/V2/index.jsp?customerid="+e.curData.customerid+"&source=V2/#/tracking?deviceid="+e.curData.id,target:"_blank"}},[e._v(e._s(e.lg.track))])])]),e._v(" "),i("detailComp",{ref:"detailComp"})],1)])},staticRenderFns:[]};var n=i("VU/8")(s,r,!1,function(e){i("ScAU")},null,null);t.default=n.exports},r2W4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("gyMJ"),s={data:function(){return{userType:["",lg.gradeDealer,lg.gradeUser,lg.gradeVirtual],records:[],curData:{},balance:{},key:"",matchMore:!1,parsedWords:[],loading:!1,loadBlance:!1,showDetail:!1}},computed:{owner:function(){return this.$store.state.functions&&this.$store.state.functions.accountimeiowner},auth:function(){return this.$store.state.auth}},components:{detailComp:i("L9W2").default,ownerComp:function(){return i.e(80).then(i.bind(null,"XIE1")).catch()}},methods:{indexMethod:function(e){return e+1},getData:function(e,t,i){var s=this,r={key:e};this.showDetail=!1,e?(t&&(r.type=1),this.key=e,this.matchMore=t,this.loading=!0,this.records=[],Object(a._122)(r).then(function(e){if(s.records=e.records,s.loading=!1,s.canShowDetail()){var t=s;setTimeout(function(){t.showDetailFn(t.records[0],i)},200)}}).catch(function(){s.loading=!1}),this.parsedWords=this.parseWords(this.key)):this.record=[]},canShowDetail:function(){if(1==this.records.length){var e=this.records[0],t=this.$trim(e.name).toLocaleUpperCase()==this.$trim(this.key).toLocaleUpperCase(),i=this.$trim(e.account).toLocaleUpperCase()==this.$trim(this.key).toLocaleUpperCase();return!(!t&&!i)}return!1},rowClick:function(e,t){this.showDetail=!0,this.curData=e,this.$refs.detailComp.setData(e)},showOwner:function(){this.$refs.ownerComp.getInfo("account",this.key)},fmtRoles:function(e,t){return this.userType[e.type]||"-"},showDetailFn:function(e,t){this.curData=e,this.showDetail=!0,this.$refs.detailComp.setData(e,t)},loadBlancdFn:function(){var e=this;this.loadBlance=!0,Object(a._102)({customerid:this.curData.id}).then(function(t){e.balance=t,e.loadBlance=!1}).catch(function(t){e.loadBlance=!1})},fmtRowDetail:function(e){var t="";return this.matchMore&&(t=[lg.name+": "+this.fmtHighlight(e.name),lg.account+": "+this.fmtHighlight(e.account),lg.contact+": "+this.fmtHighlight(e.contact),lg.mobile+": "+this.fmtHighlight(e.phone),lg.address+": "+this.fmtHighlight(e.address)].join("<br>")),t},parseWords:function(e){for(var t=[],i=e.split(","),a=0;a<i.length;a++)for(var s=i[a].split(""),r=0;r<s.length;r++)for(var n=r;n<s.length;n++){for(var o="",c=r;c<=n;c++)o+=s[c]+"";var l=o;l.length>=2&&t.push(l)}return t.sort(function(e,t){return t.length-e.length}),t},getNodeIconByData:function(e){var t=e.type||e.customertype;return 1==t?1==e.readonly?"dealerreadonly":"dealer":2==t?1==e.readonly?"userreadonly":"user":"uservirtual"},fmtHighlightWholeWord:function(e){var t=this.$trim(e).toLocaleUpperCase().indexOf(this.$trim(this.key).toLocaleUpperCase()),i=this.key.length,a=e.length;return-1==t?e||"-":e.substr(0,t)+'<span style="color:red;">'+e.substr(t,i)+"</span>"+e.substr(t+i,a)},fmtHighlight:function(e){if(!e)return"-";if(!this.matchMore)return this.fmtHighlightWholeWord(e);for(var t=this.parsedWords,i=void 0,a=0;a<t.length;a++)i=new RegExp(this.escapeRegExp(t[a]),"ig"),"em"!=t[a]&&(e=e.replace(i,"<em>"+t[a].toLocaleString()+"</em>"));return e},escapeRegExp:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},clearFn:function(){this.records=[],this.key="",this.showDetail=!1,this.$refs.detailComp&&this.$refs.detailComp.reset()}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-cont search-user-list clearfix"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-list-box"},[i("div",{staticClass:"fr pt10"},[0!=e.records.length&&e.auth.hasViewDescription&&e.owner&&e.key?i("el-popover",{attrs:{placement:"right",target:"click",width:"550"}},[i("ownerComp",{ref:"ownerComp"}),e._v(" "),i("a",{staticClass:"link",attrs:{slot:"reference"},on:{click:e.showOwner},slot:"reference"},[e._v("\n          "+e._s(e.lg.accountImeiOwner)),i("i",{staticClass:"el-icon-d-arrow-right",staticStyle:{"font-size":"11px"}})])],1):e._e()],1),e._v(" "),i("div",{staticClass:"result-box",domProps:{innerHTML:e._s(e.lg.searchTip.replace("{num}",e.records.length))}}),e._v(" "),i("el-table",{staticClass:"table-list",staticStyle:{width:"100%"},attrs:{data:e.records,"highlight-current-row":"",stripe:""},on:{"row-click":e.rowClick}},[i("el-table-column",{attrs:{type:"index",align:"center",index:e.indexMethod,label:e.lg.serialNum,width:"48"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:e.lg.customerName},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[i("i",{class:"ico-user ico-user-"+e.getNodeIconByData(t.row.relationship[0]),attrs:{title:e.fmtRoles(t.row)}}),e._v(" "),i("span",{domProps:{innerHTML:e._s(e.fmtHighlight(t.row.name))}})])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"account",label:e.lg.account},scopedSlots:e._u([{key:"default",fn:function(t){return[i("copy",{attrs:{txt:t.row.account}},[i("span",{domProps:{innerHTML:e._s(e.fmtHighlight(t.row.account))}})])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"contact",label:e.lg.contact},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.contact||"-")+"\n        ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.lg.operate},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{directives:[{name:"tip",rawName:"v-tip",value:{txt:e.fmtRowDetail(t.row),align:"centerBottom"},expression:"{txt:fmtRowDetail(scope.row),align:'centerBottom'}"}],staticClass:"link-btn",on:{click:function(i){return i.stopPropagation(),e.showDetailFn(t.row,"detail")}}},[e._v(e._s(e.lg.detail))]),e._v("\n          |\n          "),i("a",{staticClass:"link-btn"},[e._v(e._s(e.lg.membershipCustomer)+" "),e.auth.hasViewDescription?i("span",{directives:[{name:"tip",rawName:"v-tip",value:{txt:"我的"+(t.row.relationship.length-1)+"级客户<br>(仅我司销售 才显示数字)",align:"centerBottom"},expression:"{txt:'我的'+(scope.row.relationship.length-1)+'级客户<br>(仅我司销售 才显示数字)',align:'centerBottom'}"}]},[e._v(e._s(t.row.relationship.length-1))]):e._e()])]}}])}),e._v(" "),i("div",{attrs:{slot:"empty"},slot:"empty"},[e._v("\n        "+e._s(e.lg.noData)+"\n        "),0==e.records.length&&e.owner&&e.key?i("el-popover",{attrs:{placement:"right",target:"click",width:"550"}},[i("ownerComp",{ref:"ownerComp"}),e._v(" "),i("a",{staticClass:"link",attrs:{slot:"reference"},on:{click:e.showOwner},slot:"reference"},[e._v("\n            "+e._s(e.lg.accountImeiOwner)),i("i",{staticClass:"el-icon-d-arrow-right",staticStyle:{"font-size":"11px"}})])],1):e._e()],1)],1)],1),e._v(" "),i("div",{staticClass:"search-detail",style:"top:"+(e.showDetail?0:700)+"px"},[i("div",{staticClass:"back-nav clearfix"},[i("div",{staticClass:"back-nav-box fl"},[i("span",{staticClass:"back-btn",on:{click:function(t){e.showDetail=!1}}},[i("i",{staticClass:"back-icon base-icon"}),e._v(e._s(e.lg.back)+"\n        ")]),e._v(" | "),i("span",{staticClass:"ml5"},[i("span",{attrs:{title:e.lg.customerName}},[e._v(e._s(e.curData.name))]),e._v("\n         ("),i("span",{attrs:{title:e.lg.account}},[e._v(e._s(e.curData.account))]),e._v(")\n         ")])]),e._v(" "),i("div",{staticClass:"fr"},[i("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[i("table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadBlance,expression:"loadBlance"}],staticClass:"table-balance"},[i("tr",[i("td",[e._v(" "+e._s(e.balance.importpoint)+" "),i("em",[e._v(e._s(e.lg.newCard))])]),e._v(" "),i("td",[e._v(" "+e._s(e.balance.zsimportpoint)+" "),i("em",[e._v(e._s(e.lg.newCardLifelong))])])]),e._v(" "),i("tr",{directives:[{name:"show",rawName:"v-show",value:-1!=e.balance.monthpoint&&-1!=e.balance.lifelongpoint,expression:"balance.monthpoint != -1 && balance.lifelongpoint != -1"}]},[i("td",[e._v(" "+e._s(e.balance.monthpoint)+" "),i("em",[e._v(e._s(e.lg.annualCard))])]),e._v(" "),i("td",[e._v(" "+e._s(e.balance.lifelongpoint)+" "),i("em",[e._v(e._s(e.lg.lifeLongCard))])])])]),e._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:"1"==e.curData.type,expression:"curData.type == '1'"}],staticClass:"link-btn mr20",attrs:{slot:"reference"},on:{click:e.loadBlancdFn},slot:"reference"},[e._v(e._s(e.lg.balance))])])],1)]),e._v(" "),i("detailComp",{ref:"detailComp"})],1)])},staticRenderFns:[]};var n=i("VU/8")(s,r,!1,function(e){i("Webc")},null,null);t.default=n.exports},ybOy:function(e,t){}});