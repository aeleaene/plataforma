webpackJsonp([130],{"7A6a":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("gyMJ"),i={data:function(){return{records:[],total:0,start:0,pagesize:5,loading:!1,showType:"list",detailObj:{},multipleSelection:[]}},components:{detailComp:function(){return s.e(144).then(s.bind(null,"PvY0")).catch()},receiver:function(){return s.e(83).then(s.bind(null,"V1xy")).catch()}},methods:{getList:function(){var e=this;this.loading=!0,Object(n._130)({start:this.start,count:this.pagesize}).then(function(t){e.loading=!1,e.records=t.records,e.total=t.totalcount}).catch(function(){e.loading=!1})},fmtTime:function(e,t,s,n){return s?this.utcToLocal(s):"-"},handleCurrentChange:function(e){this.start=(Number(e)-1)*this.pagesize,this.getList()},deleteMsg:function(e){var t=this;this.$confirm(lg.delRecord).then(function(){Object(n._129)({messageids:e.messageid}).then(function(e){t.$message.success(lg.delSuccess),1==t.records.length&&0!=t.start&&(t.start=t.start-t.pagesize),t.getList()}).catch(function(){})}).catch(function(){})},delAll:function(){var e=this;this.$confirm(lg.allDeleteTips).then(function(){Object(n._128)({}).then(function(t){e.$message.success(lg.delSuccess),e.getList()}).catch(function(){})}).catch(function(){})},delSelectMsg:function(){var e=this,t=[];this.multipleSelection.forEach(function(e,s,n){t.push(e.messageid)}),this.$confirm(lg.delRecord).then(function(){Object(n._129)({messageids:t.join(",")}).then(function(t){e.$message.success(lg.delSuccess),e.getList()}).catch(function(){})}).catch(function(){})},showDetailFn:function(e){this.detailObj=e,this.showType="detail",this.$refs.detailComp.setData(e)},showReceiverListFn:function(e){this.showType="receiver",this.$refs.receiver.setData(e.messageid)},backList:function(){this.showType="list",this.detailObj={}},handleSelectionChange:function(e){this.multipleSelection=e},reset:function(){this.showType="list"}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:"list"==e.showType,expression:"showType == 'list'"}]},[s("div",{staticClass:"mb15"},[s("el-button",{attrs:{disabled:0==e.multipleSelection.length},on:{click:e.delSelectMsg}},[e._v(e._s(e.lg.delete))]),e._v(" "),s("el-button",{on:{click:e.delAll}},[e._v(e._s(e.lg.deleteAll))])],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"message-table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.records,"show-header":!1,stripe:""},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"javascript://"},on:{click:function(s){return e.showDetailFn(t.row)}}},[e._v("\n            "+e._s(t.row.content)+"\n          ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{attrs:{href:"javascript://",title:"---"+e.lg.sendTo},on:{click:function(s){return e.showReceiverListFn(t.row)}}},[e._v("\n            "+e._s(t.row.receivernum)+"\n          ")])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"createtime",width:"160",formatter:e.fmtTime}}),e._v(" "),s("el-table-column",{attrs:{width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("a",{staticClass:"link-btn",on:{click:function(s){return e.deleteMsg(t.row)}}},[e._v(e._s(e.lg.delete))])]}}])})],1),e._v(" "),e.total?s("el-pagination",{attrs:{"page-size":e.pagesize,background:"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"detail"==e.showType,expression:"showType == 'detail'"}]},[s("div",{staticClass:"mb10"},[s("a",{staticClass:"link-btn",on:{click:e.backList}},[s("i",{staticClass:"back-icon base-icon"}),e._v(e._s(e.lg.back))])]),e._v(" "),s("detailComp",{ref:"detailComp"})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"receiver"==e.showType,expression:"showType == 'receiver'"}]},[s("div",{staticClass:"mb10"},[s("a",{staticClass:"link-btn",on:{click:e.backList}},[s("i",{staticClass:"back-icon base-icon"}),e._v(e._s(e.lg.back))]),e._v(" | "+e._s(e.lg.sendTo)+" :\n    ")]),e._v(" "),s("receiver",{ref:"receiver"})],1)])},staticRenderFns:[]};var c=s("VU/8")(i,a,!1,function(e){s("PQkt")},null,null);t.default=c.exports},PQkt:function(e,t){}});